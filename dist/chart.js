!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scalable=e.Draggable=e.Position=e.Rectangle=e.Circle=e.Text=e.LinesGroup=e.Line=void 0;var i=c(n(13)),r=c(n(14)),o=c(n(15)),s=c(n(16)),a=c(n(5)),l=c(n(17)),h=c(n(18)),u=c(n(19));function c(t){return t&&t.__esModule?t:{default:t}}e.Line=i.default,e.LinesGroup=r.default,e.Text=o.default,e.Circle=s.default,e.Rectangle=a.default,e.Position=l.default,e.Draggable=h.default,e.Scalable=u.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2);var o=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,i=t.y,r=t.color,o=t.alpha,s=t.children,a=t.cursor,l=t.inputIgnore;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return h.x=n||0,h.y=i||0,h.color=r||"transparent",h.alpha=null!=o?o:1,h.children=s||[],h.cursor=a||"default",h.inputIgnore=l||!1,h._mouse_down=!1,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Event),i(e,[{key:"isHover",value:function(t){var e=t.x,n=t.y;return e>this.x&&e<this.x+this.w&&n>this.y&&n<this.y+this.h}},{key:"isVisible",value:function(t){return 0!=this.w&&0!=this.h&&(!(0==this.alpha||!this.color||"transparent"==this.color)&&(this.x+this.w>0&&this.x<t))}},{key:"render",value:function(t,e,n){this._children.forEach(function(i){return i.render(t,e,n)}),this.isHover(e)?(e.el||"transparent"==this.color||this.inputIgnore||(e.el=this),this._move=!0,this.emit("move",e,this),e.down&&!e.event_down?(this._mouse_down=!0,this.emit("down",e,this)):this._mouse_down&&(this._mouse_down=!1,this.emit("up",e,this))):this._move&&(this._move=!1,this.emit("leave",e,this))}},{key:"children",get:function(){return this._children},set:function(t){for(var e in t)t[e].parent=this;return this._children=t}},{key:"x",get:function(){return null!=this.parent?this._x+this.parent.x:this._x},set:function(t){return this._x=t}},{key:"y",get:function(){return null!=this.parent?this._y+this.parent.y:this._y},set:function(t){return this._y=t}},{key:"alpha",get:function(){var t=this._alpha;return null!=this.parent&&null!=this.parent.alpha&&(t=this._alpha*this.parent.alpha),t<0?0:t},set:function(t){return this._alpha=t}},{key:"needUpdate",get:function(){for(var t in this._children)if(this._children[t].needUpdate)return!0;return!1}}]),e}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Observer=e.Event=e.Scaffold=void 0;var i=s(n(9)),r=s(n(11)),o=s(n(12));function s(t){return t&&t.__esModule?t:{default:t}}e.Scaffold=i.default,e.Event=r.default,e.Observer=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slide=e.FadeSlide=e.Fade=e.Animation=void 0;var i=a(n(4)),r=a(n(24)),o=a(n(25)),s=a(n(26));function a(t){return t&&t.__esModule?t:{default:t}}e.Animation=i.default,e.Fade=r.default,e.FadeSlide=o.default,e.Slide=s.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){var n=e.child,i=e.duration,r=e.completed;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.child=n,this.duration=i||300,this.running=!1,this.completed=null!=r&&r}return i(t,[{key:"forward",value:function(){this.running||this.completed||(this.start(),this.start_time=performance.now(),this.running=!0,this.reversed=!1)}},{key:"reverse",value:function(){!this.running&&this.completed&&(this.reversed=!0,this.start(),this.start_time=performance.now(),this.running=!0)}},{key:"start",value:function(){}},{key:"curve",value:function(t){return t}},{key:"render",value:function(t,e,n){if(this.child.render(t,e,n),this.running){var i=(n-this.start_time)/this.duration;i>1&&(i=1);var r=this.reversed?1-this.curve(1-i):this.curve(i);r<0&&(r=0),this.handle(r,i),1==i&&(this.running=!1,this.completed=!this.completed)}}},{key:"child",get:function(){return this._child},set:function(t){return t.parent=this,this._child=t}},{key:"x",get:function(){return this.parent?this.parent.x:0},set:function(t){this.parent.x=t}},{key:"y",get:function(){return this.parent?this.parent.y:0},set:function(t){this.parent.y=t}},{key:"w",get:function(){return this.parent.w}},{key:"h",get:function(){return this.parent.h}},{key:"color",get:function(){return this.parent.color}},{key:"needUpdate",get:function(){return this.running}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},s=n(1),a=(i=s)&&i.__esModule?i:{default:i};var l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.w,i=t.h,r=t.borderTop,o=t.borderBottom,s=(t.borderLeft,t.borderRight,t.clip);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return a.w=n,a.h=i,a.clip=s||!1,r&&(a.borderTop={color:r.color||"rgba(0, 0, 0, 0.2)",width:r.width||1,inside:r.inside||!1}),o&&(a.borderBottom={color:o.color||"rgba(0, 0, 0, 0.2)",width:o.width||1,inside:o.inside||!1}),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"renderBorder",value:function(t){if(this.borderTop||this.borderBottom||this.borderLeft||this.borderRight){if(t.beginPath(),this.borderTop){t.strokeStyle!==this.borderTop.color&&(t.strokeStyle=this.borderTop.color),t.lineWidth!==this.borderTop.width&&(t.lineWidth=this.borderTop.width);var e=this.borderTop.inside?this.y+this.borderTop.width/2:this.y;t.moveTo(this.x,e),t.lineTo(this.x+this.w,e)}if(this.borderBottom){t.strokeStyle!==this.borderBottom.color&&(t.strokeStyle=this.borderBottom.color),t.lineWidth!==this.borderBottom.width&&(t.lineWidth=this.borderBottom.width);e=this.borderBottom.inside?this.y+this.h-this.borderTop.width/2:this.y+this.h;t.moveTo(this.x,e),t.lineTo(this.x+this.w,e)}t.stroke(),t.closePath()}}},{key:"render",value:function(t,n,i){if(!this.isVisible(t.width)&&!this.clip)return this.renderBorder(t),void o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n,i);this.clip,this.alpha>0&&(t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),t.fillStyle!==this.color&&(t.fillStyle=this.color),t.fillRect(this.x,this.y,this.w,this.h),this.renderBorder(t)),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n,i),this.clip}}]),e}();e.default=l},function(t,e,n){"use strict";var i=n(7);window.LineChart=i.LineChart},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineChart=void 0;var i,r=n(8),o=(i=r)&&i.__esModule?i:{default:i};e.LineChart=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),o=n(0),s=u(n(20)),a=u(n(29)),l=u(n(30)),h=u(n(33));function u(t){return t&&t.__esModule?t:{default:t}}var c=50,f=35,d={main_padding_top:40,main_padding_bottom:40,background:"#fff",map_color1:"rgba(205, 211, 236, 0.4)",map_color2:"rgba(212, 220, 244, 0.28)",map_edge_width:4,map_padding_top:5,map_padding_bottom:5,font_family:"Arial",text_color1:"#99a4ac",text_size1:12.5,text_color2:"#99a4ac",text_size2:12,text_color3:"#000",text_size3:14,line_color1:"#f2f4f5",line_color2:"#d2d2d2",lines_count:6,animation_duration_1:260,animation_duration_2:260,animation_duration_3:200,animation_duration_4:220},p=function(){function t(e,n,i,u){var p=this,v=u.locale,y=u.theme;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var _=document.createElement("canvas");document.getElementById(e,g).appendChild(_);var b=this.localeObserver=new r.Observer,m=this.themeObserver=new r.Observer,g=this.hiddenColumnsObserver=new r.Observer,w=i-c-f;this.map=new l.default({width:n,map_height:c,main_height:w,localeObserver:b,themeObserver:m,hiddenColumnsObserver:g}),this.dates=new a.default({animation_duration:280,localeObserver:b,themeObserver:m}),this.main=new s.default({canvas:_,width:n,height:w,localeObserver:b,themeObserver:m,hiddenColumnsObserver:g}),this.map.on("update",function(t){return p.main.update(t)}),this.map.on("update",function(t){return p.dates.update(t)}),this.checboxes=new h.default(e,m,g);var x=i-c,O=w+f/4;this.scaffold=new r.Scaffold({canvas:_,width:n,height:i,background:y?y.background:d.background,children:[this.main.element,new o.Position({y:O,children:[this.dates.element]}),new o.Position({y:x,children:[this.map.element]})]}),this.map.on("update",function(){p.init||(p.init=!0,p.scaffold.setNeedUpdate("init",!0,100))}),this.main.columns.on("ready",function(){p.scaffold.setNeedUpdate("columns_ready",!0,100)}),this.setTheme(y||d),this.setLocale(v||t.en)}return i(t,null,[{key:"ru",get:function(){return{month:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],day:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]}}},{key:"en",get:function(){return{month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}}]),i(t,[{key:"setData",value:function(t){this.map.setData({columns:t.columns,colors:t.colors,names:t.names}),this.checboxes.setData({columns:t.columns,colors:t.colors,names:t.names}),this.scaffold.setNeedUpdate("set_data",!0,100)}},{key:"setTheme",value:function(t){for(var e in d)t[e]||(t[e]=d[e]);this.themeObserver.broadcast(t),this.scaffold.setNeedUpdate("theme",!0,100),this.scaffold.background=t.background}},{key:"setLocale",value:function(t){this.localeObserver.broadcast(t),this.scaffold.setNeedUpdate("locale",!0,100)}}]),t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(10),s=(i=o)&&i.__esModule?i:{default:i};var a=function(){function t(e){var n=this,i=e.canvas,r=e.width,o=e.height,a=e.background,l=e.children;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=i,this.canvas.width=this.width=r,this.canvas.height=this.height=o,this.canvas.style.background=a||"#fff",this._need_update={},this.input=new s.default(this),this.children=l||[],this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",this.ctx.width=this.width,this.ctx.lineCap="round",this.ctx.miterLimit=1,requestAnimationFrame(function(t){return n.render(t)})}return r(t,[{key:"setNeedUpdate",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._need_update[t]!==e&&(this._need_update[t]=e,i&&setTimeout(function(){return n._need_update[t]=!1},i))}},{key:"render",value:function(t){var e=this,n=!1;this.needUpdate||this.children.forEach(function(t){t.needUpdate&&(n=!0)}),this.needUpdate||n?(this.ctx.clearRect(0,0,this.width,this.height),this.children.forEach(function(n){n.render(e.ctx,e.input,t)}),this.input.down&&!this.input.event_down&&(this.input.event_down=!0),this.input.el?this.input.el.cursor!=this.cursor&&(this.canvas.style.cursor=this.cursor=this.input.el.cursor):this.canvas.style.cursor=this.cursor="default",requestAnimationFrame(function(t){return e.render(t)})):requestAnimationFrame(function(t){return e.render(t)})}},{key:"add",value:function(t){this.children.push(t)}},{key:"background",get:function(){return this._background},set:function(t){this._background=t,this.canvas.style.background=t}},{key:"needUpdate",get:function(){for(var t in this._need_update)if(this._need_update[t])return!0}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.canvas;this.x=null,this.y=null,this.down=!1,this.event_down=!1;var i=this;n.addEventListener("mouseout",function(){return e.setNeedUpdate("mouse",!1)}),document.addEventListener("mousemove",function(t){i.el=null,t.target==n?(e.setNeedUpdate("mouse",!0),i.x=t.layerX,i.y=t.layerY):(e.setNeedUpdate("mouse",!1),i.x=null,i.y=null)}),document.addEventListener("mousedown",function(t){t.target==n&&(i.down=!0)}),document.addEventListener("mouseup",function(t){i.el=null,t.target==n&&(i.down=!1,i.event_down=null)}),n.addEventListener("touchmove",function(t){if(t.target==n){var e=t.targetTouches[0];i.down=!0,i.x=e.pageX-n.offsetLeft,i.y=e.pageY-n.offsetTop}}),document.addEventListener("touchend",function(t){t.target==n&&(i.down=!1)})}return i(t,[{key:"x",get:function(){return this._x},set:function(t){this._x&&this._prev_x!=this._x&&(this._prev_x=this._x),this._x=t}},{key:"direction",get:function(){var t="unknow";return this._prev_x&&this._x?(this._prev_x>this._x&&(t="left"),this._prev_x<this._x&&(t="right"),{x:t}):{x:t}}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners={}}return i(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"emit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.listeners[t]&&this.listeners[t].forEach(function(t){return t(e,n)})}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observers=[]}return i(t,[{key:"subscribe",value:function(t){this.observers.push(t)}},{key:"unsubscribe",value:function(t){this.observers=this.observers.filter(function(e){return e!==t})}},{key:"broadcast",value:function(t){this.observers.forEach(function(e){return e(t)})}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){var n=e.x,i=e.y,r=e.x2,o=e.y2;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n||0,this.y=i||0,this.x2=r||0,this.y2=o||i,this.alpha=1}return i(t,[{key:"isVisible",value:function(t){return!(!this.color||"transparent"==this.color)&&((this.x>0||this.x2>0)&&this.x<t)}},{key:"render",value:function(t,e,n){this.isVisible(t.width)&&(t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),t.moveTo(this.x,this.y),t.lineTo(this.x2,this.y2))}},{key:"alpha",get:function(){var t=this._alpha;return null!=this.parent&&null!=this.parent.alpha&&(t=this._alpha*this.parent.alpha),t<0?0:t},set:function(t){return this._alpha=t}},{key:"x2",get:function(){return null!=this.parent?this._x2+this.parent.x:this._x2},set:function(t){return this._x2=t-.01}},{key:"y2",get:function(){return null!=this.parent?this._y2+this.parent.y:this._y2},set:function(t){return this._y2=t}},{key:"x",get:function(){return null!=this.parent?this._x+this.parent.x-.01:this._x},set:function(t){return this._x=t}},{key:"y",get:function(){return null!=this.parent?this._y+this.parent.y:this._y},set:function(t){return this._y=t}},{key:"color",get:function(){return this.parent.color},set:function(t){}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){var n=e.x,i=e.y,r=e.lineWidth,o=e.color,s=e.children;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n||0,this.y=i||0,this.lineWidth=null!==r?r-.5:1.5,this.color=o,this.children=s||[]}return i(t,[{key:"render",value:function(t,e,n){0!=this.alpha&&(t.strokeStyle!==this.color&&(t.strokeStyle=this.color),t.lineWidth!==this.lineWidth&&(t.lineWidth=this.lineWidth),t.beginPath(),this._children.forEach(function(i){return i.render(t,e,n)}),t.closePath(),t.stroke())}},{key:"children",get:function(){return this._children},set:function(t){for(var e in t)t[e].parent=this;return this._children=t}},{key:"x",get:function(){return null!=this.parent?this._x+this.parent.x:this._x},set:function(t){return this._x=t}},{key:"y",get:function(){return null!=this.parent?this._y+this.parent.y:this._y},set:function(t){return this._y=t}},{key:"needUpdate",get:function(){for(var t in this._children)if(this._children[t].needUpdate)return!0;return!1}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),s=(i=o)&&i.__esModule?i:{default:i};var a=function(t){function e(t){var n=t.text,i=t.size,r=t.fontFamily,o=t.align;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return s.text=n+""||"",s.size=i||14,s.fontFamily=r||"Arial",s.align=o||"left",s.cached=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"isHover",value:function(t){t.x,t.y;return!1}},{key:"isVisible",value:function(t){return 0!=this.w&&0!=this.h&&(!(0==this.alpha||!this.color||"transparent"==this.color)&&(this.x+this.w>=0&&this.x<t))}},{key:"render",value:function(t,e,n){this.isVisible(t.width)&&(t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),t.fillStyle!==this.color&&(t.fillStyle=this.color),t.font!==this.size+"px "+this.fontFamily&&(t.font=this.size+"px "+this.fontFamily),t.textAlign!==this.align&&(t.textAlign=this.align),t.fillText(this.text,this.x,this.y))}},{key:"w",get:function(){return this.size*this.text.length},set:function(t){this.size=t/this.text.length}},{key:"h",get:function(){return this.size},set:function(t){this.size=t}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),s=(i=o)&&i.__esModule?i:{default:i};var a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.r,i=t.border;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return r.r=n,r.border=i,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"isHover",value:function(t){var e=t.x,n=t.y;return 0!=this.r&&(e<this.x+this.r&&e>this.x-this.r&&n<this.y+this.r&&n>this.y-this.r)}},{key:"isVisible",value:function(t){return 0!=this.r&&(!(0==this.alpha||!this.color||"transparent"==this.color)&&(this.x+this.r/2>0&&this.x-this.r/2<t))}},{key:"render",value:function(t,e,n){this.isVisible(t.width)&&(t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),t.beginPath(),t.arc(this.x,this.y,this.r,0,2*Math.PI),t.fillStyle!==this.color&&(t.fillStyle=this.color),t.fill(),this.border&&(t.beginPath(),t.arc(this.x,this.y,this.r,0,2*Math.PI),t.strokeStyle=this.border.color,t.lineWidth=this.border.w,t.stroke()))}},{key:"w",get:function(){return this.r},set:function(t){this.r=t}},{key:"h",get:function(){return this.r},set:function(t){this.r=t}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),s=(i=o)&&i.__esModule?i:{default:i};var a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.w,i=t.h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return r.w=n||0,r.h=i||0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"render",value:function(t,n,i){0!=this.alpha&&(t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n,i))}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),s=(i=o)&&i.__esModule?i:{default:i};var a=function(t){function e(t){var n=t.child,i=t.axisX,r=t.axisY,o=t.canDragX,s=t.canDragY,a=t.onDragging;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:n.x,y:n.y,w:n.w,h:n.h,children:[n]}));return n.x=0,n.y=0,l.child=n,l.axisX=i||!1,l.axisY=r||!1,l.canDragX=o,l.canDragY=s,a&&l.on("dragging",a),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"isHover",value:function(t){var e=t.x,n=t.y;return e>this.childX&&e<this.childX+this.w&&n>this.childY&&n<this.childY+this.h}},{key:"handleDragging",value:function(t){if(!t.down)return this._drag=!1,void(this._inputOffset=null);if(this._inputOffset||(this._inputOffset={x:t.x-this._x,y:t.y-this._y}),this.axisY){var e=t.y-this._inputOffset.y;this.y=this.canDragY({child:this.child,y:e})}if(this.axisX){var n=t.x-this._inputOffset.x;this.x=this.canDragX({child:this.child,x:n})}this.emit("dragging")}},{key:"render",value:function(t,n){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n),this._mouse_down&&(this._drag=!0),this._drag&&this.handleDragging(n)}},{key:"w",get:function(){return this.child.w},set:function(t){return this.child.w=t}},{key:"h",get:function(){return this.child.h},set:function(t){return this.child.h=t}},{key:"childX",get:function(){return this.child.x}},{key:"childY",get:function(){return this.child.y}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(1)),o=s(n(5));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t){var n=t.child,i=t.axisX,r=t.axisY,o=t.width,s=t.onScaling,a=t.edgeColor,l=t.edgeWidth;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:n.x,y:n.y,w:n.w,h:n.h}));return n.x=0,n.y=0,h.child=n,h.axisX=i||!1,h.axisY=r||!1,h.width=o,s&&h.on("scaling",s),h.edgeColor=a||"rgba(0, 0, 0, 0.2)",h.edgeWidth=l||5,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"_getChildren",value:function(){var t=this;this.left=new o.default({x:-this.edgeWidth,w:this.edgeWidth,h:this.h,cursor:"col-resize",color:this.edgeColor}),this.left.on("down",function(){return t.left._scaling=!0}),this.right=new o.default({x:this.w,w:this.edgeWidth,h:this.h,cursor:"col-resize",color:this.edgeColor}),this.right.on("down",function(){return t.right._scaling=!0});var e=this.axisX?[this.left,this.right]:[],n=(this.axisY,[]);return[].concat(e,n,[this.child])}},{key:"_slaleLeftX",value:function(t){if(!t.down)return this.left._scaling=!1,void(this.left._inputOffset=null);if(this.left._inputOffset||(this.left._inputOffset={x:t.x-this._x,y:t.y-this._y,w:this.w+this._x}),!(this.x-this.edgeWidth<=0&&(this.x=this.edgeWidth-this.left._inputOffset.x,"right"!=t.direction.x))){var e=t.x-this.left._inputOffset.x;this.w=this.left._inputOffset.w-e,this.right.x=this.w,this.x=e,this.emit("scaling")}}},{key:"_slaleRightX",value:function(t){if(!t.down)return this.right._scaling=!1,void(this.right._inputOffset=null);this.right.x+this.edgeWidth>=this.width&&(this.right.x=this.w,"left"!=t.direction.x)||(this.right._inputOffset||(this.right._inputOffset={x:t.x-this.w,y:t.y-this._y,w:this.w+this._x}),this.w=t.x-this.right._inputOffset.x,this.right.x=this.w,this.emit("scaling"))}},{key:"render",value:function(t,n,i){this.left._scaling&&this._slaleLeftX(n),this.right._scaling&&this._slaleRightX(n),function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n,i)}},{key:"edgeColor",get:function(){return this._edgeColor},set:function(t){this._edgeColor=t,this.children=this._getChildren()}},{key:"edgeWidth",get:function(){return this._edgeWidth},set:function(t){this._edgeWidth=t>>0,this.children=this._getChildren()}},{key:"child",get:function(){return this._child},set:function(t){this._child=t,this.children=this._getChildren()}},{key:"w",get:function(){return this.child.w},set:function(t){return this.child.w=t}},{key:"h",get:function(){return this.child.h},set:function(t){return this.child.h=t}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(21),o=(i=r)&&i.__esModule?i:{default:i};e.default=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=h(n(22)),s=h(n(23)),a=h(n(27)),l=h(n(28));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){var n=e.canvas,i=e.width,h=e.height,u=e.localeObserver,c=e.themeObserver,f=e.hiddenColumnsObserver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=i,this.height=h,this.hover=new o.default({canvas:n,width:i,height:h,localeObserver:u,themeObserver:c,hiddenColumnsObserver:f}),this.y_axis=new s.default({width:i,height:h,themeObserver:c}),this.lines=new l.default({width:i,height:h,themeObserver:c}),this.columns=new a.default({width:i,height:h,themeObserver:c,hiddenColumnsObserver:f}),this.element=new r.Position({children:[this.lines.element,this.columns.element,this.y_axis.element,this.hover.element]})}return i(t,[{key:"update",value:function(t){var e=t.offset,n=t.scale,i=t.columns,r=t.dates_column,o=t.colors,s=t.names;this.y_axis.update({offset:e,scale:n,columns:i}),this.lines.update({scale:n,columns:i}),this.columns.update({offset:e,scale:n,columns:i,colors:o}),this.hover.update({offset:e,scale:n,columns:i,dates_column:r,colors:o,names:s})}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);var s=function(){function t(e){var n=this,r=e.canvas,s=e.width,a=e.height,l=e.localeObserver,h=e.themeObserver,u=e.hiddenColumnsObserver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=r,this.width=s,this.height=a,this.prev_input={},this.hidden_columns=[],this.r=0,l.subscribe(function(t){n.locale=t,n.updatePointers()}),this.padding_bottom=0,h.subscribe(function(t){n.padding_bottom=t.main_padding_bottom,n.background=t.background,n.line.color=t.line_color2,n.font_size=t.text_size3,n.font_family=t.font_family,n.updateDiv(n.div,{background:n.background}),n.updateDiv(n.date_text,{color:t.text_color3,"font-size":n.font_size+"px","font-family":t.font_family}),n.updatePointers()}),u.subscribe(function(t){var e=i(t,2),r=e[0],o=e[1];if("hide"==r&&n.visible_columns.length>1&&n.hidden_columns.push(o),"show"==r)for(var s in n.hidden_columns)n.hidden_columns.includes(o)&&n.hidden_columns.splice(s,1)}),this.pointers=new o.Rectangle({h:a}),this.line=new o.Rectangle({w:1,h:a}),this.element=new o.Rectangle({w:s,h:a,children:[this.line,this.pointers]}),r.addEventListener("mouseout",function(){return n.hideInfo()}),this.element.on("move",function(t,e){return n.onMove(t)}),this.element.on("leave",function(t,e){return n.hideInfo()}),this.createInfo()}return r(t,[{key:"updateDiv",value:function(t,e){for(var n in e)t.style[n]=e[n]}},{key:"update",value:function(t){var e=t.offset,n=t.scale,i=t.columns,r=t.dates_column,o=t.colors,s=t.names;this.element.x=e.x,this.offset=e,this.prev_scale=this.scale,this.scale=n,this.columns=i,this.dates=r,this.colors=o,this.names=s,this.updatePointers()}},{key:"updatePointers",value:function(){this.scale&&(this.r=2+this.scale.x/10,this.r>5&&(this.r=5),this.pointers.children=this.getColumnsGroup(),this.element.w=(this.columns[0].length-2)*this.scale.x)}},{key:"onMove",value:function(t){var e=this;if(t.x!=this.prev_input.x||t.y!=this.prev_input.y){this.prev_input.x=t.x,this.prev_input.y=t.y;var n=-this.element.x+t.x;this.line.x=n,this.line.alpha=1;var i=!1,r=[],o=void 0;if(this.pointers.children.forEach(function(n){if(!e.hidden_columns.includes(n.column_index)){var s=e.element.x+n._x;t.x>s-n.r&&t.x<s+n.r?(i=!0,n.alpha=1,r[n.column_index]=n.value,o=n.index):n.alpha=0}}),this.visible!==i&&(this.visible=i,i?this.showInfo(r,o):this.hideInfo()),this.visible){var s=this.canvas.offsetTop+t.y;this.div.style.top=(s<100?0:s-100)+"px",this.div.style.left=this.canvas.offsetLeft+t.x+220+"px"}}}},{key:"createInfo",value:function(){this.div=document.createElement("div"),this.updateDiv(this.div,{position:"absolute","padding-bottom":"8px",background:this.background,"box-shadow":"0px 0px 2px rgba(0, 0, 0, 0.42)","border-radius":"6px",display:"none"}),this.date_text=document.createElement("div"),this.div.appendChild(this.date_text),this.updateDiv(this.date_text,{"font-weight":"bold",margin:"10px 14px"}),this.div_columns=document.createElement("div"),this.div.appendChild(this.div_columns),this.updateDiv(this.div_columns,{margin:"-4px 14px"}),document.body.appendChild(this.div)}},{key:"createColumnInfo",value:function(t,e){if(t>>=0,!this.hidden_columns.includes(t)){var n=this.names[this.columns[t][0]],i=this.colors[this.columns[t][0]],r=document.createElement("div");this.updateDiv(r,{color:i,float:t%2?"right":"left","font-size":this.font_size-2+"px","font-family":this.font_family,"margin-right":"10px"});var o=document.createElement("div");this.updateDiv(o,{"font-size":1.25*this.font_size+"px","font-family":this.font_family,"font-weight":"bold"}),o.innerHTML=e,r.appendChild(o);var s=document.createElement("div");this.updateDiv(o,{"font-family":this.font_family}),s.innerHTML=n,r.appendChild(s),this.div_columns.appendChild(r)}}},{key:"showInfo",value:function(t,e){for(var n in this.div_columns.innerHTML=null,t){var i=t[n];this.createColumnInfo(n,i)}this.date_text.innerHTML=this.getDateByIndex(e),this.div.style.display="table"}},{key:"hideInfo",value:function(){this.div.style.display="none"}},{key:"getDateByIndex",value:function(t){var e=new Date(this.dates[t]),n=this.locale.day[e.getDay()],i=e.getDate();return n+", "+this.locale.month[e.getMonth()]+" "+i}},{key:"getColumnsGroup",value:function(){for(var t=[],e=0;e<this.columns.length;e++)for(var n=this.columns[e],i=1;i<n.length;i++){var r=new o.Circle({alpha:0,x:(i-1)*this.scale.x+1,y:this.height-n[i]*this.scale.y+this.offset.y-this.padding_bottom+1,r:this.r,border:{w:this.r/2-.5,color:this.colors[n[0]]},color:this.background});r.column_index=e,r.value=n[i],r.index=i,t.push(r)}return t}},{key:"visible_columns",get:function(){for(var t=[],e=0;e<this.columns.length;e++)this.hidden_columns.includes(e)||t.push(e);return t}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(3);var s=function(){function t(e){var n=this,i=e.width,o=e.height,s=e.themeObserver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=i,this.height=o,this.data=[],this.lines={top:new r.Position({w:i}),bottom:new r.Position({w:i})},this.padding_top=0,this.padding_bottom=0,s.subscribe(function(t){n.padding_top=t.main_padding_top,n.padding_bottom=t.main_padding_bottom,n.lines_count=t.lines_count,n.step=(n.height-30)/n.lines_count,n.color=n.bottom_text.color=t.text_color1,n.font_size=n.bottom_text.size=t.text_size1,n.font_family=n.bottom_text.fontFamily=t.font_family,n.duration=t.animation_duration_2,n.scale&&n.createLines()}),this.bottom_text=new r.Text({y:this.height-15,text:0,size:this.font_size,fontFamily:this.font_family,color:this.color}),this.element=new r.Position({children:[this.lines.top,this.lines.bottom,this.bottom_text]})}return i(t,[{key:"update",value:function(t){var e=t.offset,n=t.scale,i=t.columns;this.element.x=0,this.offset=e,this.prev_scale=this.scale,this.scale=n,this.columns=i,this.prev_scale?this.animateDirection():this.createLines()}},{key:"calc",value:function(t){return(t=(t*this.step+this.offset.y-this.padding_bottom)/this.scale.y)>1e6?(t/1e6>>0)+"М":t>1e3?(t/1e3>>0)+"К":t>>0}},{key:"createLines",value:function(){this.data=[];for(var t=1;t<=this.lines_count;t++)this.data.push(this.calc(t));this.lines.top.children=this.getLinesGroup(0,0,this.data)}},{key:"animateDirection",value:function(){if(!this.lines.top.children.running){this.prev_scale.y<this.scale.y&&this.animateFrom("bottom"),this.prev_scale.y>this.scale.y&&this.animateFrom("top"),this.data=[];for(var t=1;t<=this.lines_count;t++)this.data.push(this.calc(t))}}},{key:"animateFrom",value:function(t){for(var e="top"==t?"bottom":"top",n=[],i=1;i<=this.lines_count;i++)n.push(this.calc(i));this.lines[t].children=this.getLinesGroup(-120,-120,"top"==e?this.data:n),this.lines[e].children=this.getLinesGroup(22,20,"bottom"==e?this.data:n),this.lines.top.children.forEach(function(t){t.completed=!0,t.reverse()}),this.lines.bottom.children.forEach(function(t){t.forward()})}},{key:"getLinesGroup",value:function(t,e,n){for(var i=[],s=1;s<=this.lines_count;s++)i.push(new o.FadeSlide({child:new r.Text({y:this.height-s*this.step-15,text:n[s-1],size:this.font_size,fontFamily:this.font_family,color:this.color}),offset:s*e+t,duration:this.duration}));return i}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(4),s=(i=o)&&i.__esModule?i:{default:i};var a=function(t){function e(t){return function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(t),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"start",value:function(){}},{key:"handle",value:function(t,e){this.child.alpha=this.reversed?t:1-t}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(4),s=(i=o)&&i.__esModule?i:{default:i};var a=function(t){function e(t){var n=t.offset;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return i.offset=n||20,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"curve",value:function(t){return Math.pow(t,1)}},{key:"alphaCurve",value:function(t){return Math.pow(t,.5)}},{key:"start",value:function(){this.reversed&&(this.start_y=this.start_y+this.offset)}},{key:"handle",value:function(t,e){var n=t*this.offset;this.reversed?(this.child.y=this.start_y-n,this.child.alpha=this.alphaCurve(e)):(this.child.y=this.start_y+n,this.child.alpha=1-this.alphaCurve(e)),this.child.y2&&(this.child.y2=this.child.y)}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t,this.start_y=this.child.y}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(4),s=(i=o)&&i.__esModule?i:{default:i};var a=function(t){function e(t){var n=t.offset,i=t.onProgress;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return r.offset=n||20,r.onProgress=i,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"toAlpha",value:function(t){this._alpha=t}},{key:"curve",value:function(t){return Math.pow(t,1)}},{key:"start",value:function(){this.reversed&&(this.start_y=this.start_y+this.offset)}},{key:"handle",value:function(t,e){var n=t*this.offset;this.reversed?this.child._y=this.start_y-n:this.child._y=this.start_y+n,this.child.y2&&(this.child.y2=this.child.y),null!=this._alpha&&this.child.alpha!==this._alpha&&(this.child.alpha=1-e+this._alpha),this.onProgress&&this.onProgress(this.child)}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t,this.start_y=this.child._y}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),s=n(0),a=n(3);var l=function(t){function e(t){var n=t.width,r=t.height,o=t.themeObserver,a=t.hiddenColumnsObserver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.width=n,l.height=r,l.hidden_columns=[],l.padding_bottom=0,o.subscribe(function(t){l.padding_bottom=t.main_padding_bottom,l.duration=t.animation_duration_4,l.scale&&(l.pointers.children=l.getColumnsGroup(),l.updateLines())}),a.subscribe(function(t){var e=i(t,2),n=e[0],r=e[1];if("hide"==n&&l.visible_columns.length>1&&(l.hidden_columns.push(r),l.hideColumn(r)),"show"==n){var o=!1;for(var s in l.hidden_columns)l.hidden_columns.includes(r)&&(o=!0,l.hidden_columns.splice(s,1));o&&l.showColumn(r)}}),l.pointers=new s.Rectangle,l.element=new s.Rectangle({h:r,children:[l.pointers]}),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Event),r(e,[{key:"update",value:function(t){var e=t.offset,n=t.scale,i=t.columns,r=t.colors;this.element.x=e.x,this.offset=e,this.prev_scale=this.scale,this.scale=n,this.columns=i,this.colors=r,this.updatePointers(),this.updateLines()}},{key:"updatePointers",value:function(){var t=this;if(0==this.pointers.children.length)return this.pointers.children=this.getColumnsGroup(),this.element.w=(this.columns[0].length-2)*this.scale.x,void this.emit("ready");this.pointers.children.forEach(function(e){e.children.forEach(function(e){e.child.x=e.index*t.scale.x})}),this.animateDirection()}},{key:"updateLines",value:function(){this.pointers.children.forEach(function(t){for(var e=0;e<t.children.length;e++){var n=t.children[e],i=t.children[e+1];i?i&&n.column_index==i.column_index&&(n.child._x2=i.child._x,n.child._y2=i.child._y):n.child._x2=n.child._x}})}},{key:"animateDirection",value:function(){this.pointers.children[0].running||this.prev_scale.y!==this.scale.y&&this.animateColumns()}},{key:"animateColumns",value:function(){var t=this;this.pointers.children.forEach(function(e){e.children.forEach(function(e){var n=t.height-e.column_value*t.scale.y+t.offset.y-t.padding_bottom;e.completed=!1,e.offset=-(e.child.y-n),e.forward()})})}},{key:"hideColumn",value:function(t){var e=this;this.pointers.children.forEach(function(n){n.children.forEach(function(n){if(n.column_index===t){var i=e.height-n.column_value*e.scale.y+e.offset.y-e.padding_bottom;n.completed=!1,n.offset=-(n.child.y-i),n.toAlpha(0),n.forward()}})})}},{key:"showColumn",value:function(t){var e=this;this.pointers.children.forEach(function(n){n.children.forEach(function(n){if(n.column_index===t){var i=e.height-n.column_value*e.scale.y+e.offset.y-e.padding_bottom;n.completed=!1,n.offset=-(n.child.y-i),n.toAlpha(1),n.forward()}})})}},{key:"getColumnsGroup",value:function(){for(var t=this,e=[],n=0;n<this.columns.length;n++){for(var i=this.columns[n],r=new s.LinesGroup({lineWidth:2,color:this.colors[i[0]]}),o=[],l=1;l<i.length&&!(l>i.length-1);l++){var h=i[l]*this.scale.y,u=i[l+1]*this.scale.y,c=this.height+this.offset.y-this.padding_bottom,f=new a.Slide({child:new s.Line({x:(l-1)*this.scale.x,x2:l*this.scale.x,y:c-h,y2:c-u}),duration:this.duration,onProgress:function(){return t.updateLines()}});f.column_index=n,f.column_value=i[l],f.index=l-1,o.push(f)}r.children=o,e.push(r)}return e}},{key:"visible_columns",get:function(){for(var t=[],e=0;e<this.columns.length;e++)this.hidden_columns.includes(e)||t.push(e);return t}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(3);var s=function(){function t(e){var n=this,i=e.width,o=e.height,s=e.themeObserver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=i,this.height=o,this.lines={top:new r.LinesGroup({lineWidth:2,color:this.color}),bottom:new r.LinesGroup({lineWidth:2,color:this.color}),fixed:new r.LinesGroup({lineWidth:2,color:this.color,children:[new r.Line({x2:this.width,y:this.height})]})},s.subscribe(function(t){n.lines_count=t.lines_count-1,n.step=(n.height-30)/n.lines_count,n.color=n.lines.top.color=n.lines.bottom.color=n.lines.fixed.color=t.line_color1,n.duration=t.animation_duration_1,n.lines.top.children=n.getLinesGroup(0,0,0)}),this.element=new r.Position({children:[this.lines.top,this.lines.bottom,this.lines.fixed]})}return i(t,[{key:"update",value:function(t){var e=t.scale,n=t.columns;this.element.w=(n[0].length-2)*e.x,this.element.x=0,this.prev_scale=this.scale,this.scale=e,this.columns=n,this.prev_scale&&this.animateDirection()}},{key:"animateDirection",value:function(){this.lines.top.children.running||(this.prev_scale.y<this.scale.y&&this.animateFrom("bottom"),this.prev_scale.y>this.scale.y&&this.animateFrom("top"))}},{key:"animateFrom",value:function(t){var e="top"==t?"bottom":"top";this.lines[t].children=this.getLinesGroup(0,-60,-20),this.lines[e].children=this.getLinesGroup(0,100,5),this.lines.top.children.forEach(function(t){t.completed=!0,t.reverse()}),this.lines.bottom.children.forEach(function(t){t.forward()})}},{key:"getLinesGroup",value:function(t,e,n){for(var i=[],s=1;s<=this.lines_count;s++){var a=new o.FadeSlide({child:new r.Line({x:0,x2:this.width,y:t+this.height-s*this.step,color:this.color}),offset:s*n+e,duration:this.duration});i.push(a)}return i}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(3);var s=function(){function t(e){var n=this,i=e.localeObserver,o=e.themeObserver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dates=[],this.hidden_levels=[],this.element=new r.Position,i.subscribe(function(t){n.locale=t,n.element.children=[],n.createDates()}),o.subscribe(function(t){n.element&&(n.color=t.text_color2,n.font_size=t.text_size2,n.font_family=t.font_family,n.duration=t.animation_duration_3,n.element.children=[],n.createDates())})}return i(t,[{key:"update",value:function(t){var e=t.offset,n=t.scale,i=t.dates_column;this.element.x=e.x+20,this.prev_scale=this.scale,this.scale=n,this.dates=i,0==this.element.children.length?(this.calc_hidden_levels(!0),this.createDates()):this.animate()}},{key:"createDates",value:function(){if(this.locale){for(var t=[],e=1;e<this.dates.length;e++){var n=new Date(this.dates[e]),i=n.getDate(),s=this.locale.month[n.getMonth()],a=new r.Rectangle({alpha:this.hidden.includes(e-1)?0:1,x:(e-1)*this.scale.x+(1==e?0:-20)+(e+1==this.dates.length?-20:0),w:this.item_width,children:[new r.Text({text:s+" "+i,size:this.font_size,fontFamily:this.font_family,color:this.color,align:"center"})]}),l=new o.Fade({child:a,duration:this.duration,completed:this.hidden.includes(e-1)});t.push(l)}this.element.children=t}}},{key:"animate",value:function(){this.element.w=(this.element.children.length-1)*this.scale.x,this.calc_hidden_levels();for(var t=0;t<this.element.children.length;t++){var e=this.element.children[t];e.child.x=t*this.scale.x+(0==t?0:-20)+(t+1==this.element.children.length?-20:0),this.hidden.includes(t)?e.forward():e.reverse()}}},{key:"calc_hidden_levels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.dates.length*this.scale.x,n=(this.dates.length-this.hidden.length)*this.item_width;if(t||this.prev_scale.x>this.scale.x){if((e-n)/this.visible.length<=1){var i=this.visible.slice();this.hidden_levels.push([]);for(var r=0;r<i.length;r++)r%2==0&&this.hidden_levels[this.hidden_levels.length-1].push(i[r])}(e-n)/this.visible.length<=1&&this.calc_hidden_levels(!0)}else{if(this.prev_scale.x<this.scale.x&&this.hidden_levels.length>0)(e-n)/this.hidden_levels[this.hidden_levels.length-1].length>this.item_width&&this.hidden_levels.splice(this.hidden_levels.length-1,1)}}},{key:"item_width",get:function(){return 5*this.font_size}},{key:"hidden",get:function(){var t=[];for(var e in this.hidden_levels)t=t.concat(this.hidden_levels[e]);return t}},{key:"visible",get:function(){for(var t=[],e=0;e<this.dates.length;e++)this.hidden.includes(e)||t.push(e);return t}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(31),o=(i=r)&&i.__esModule?i:{default:i};e.default=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),a=n(0),l=n(3),h=n(32),u=(i=h)&&i.__esModule?i:{default:i};var c=function(t){function e(t){var n=t.width,i=t.map_height,o=t.main_height,s=t.localeObserver,l=t.themeObserver,h=t.hiddenColumnsObserver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return c.width=n,c.map_height=i,c.padding_top=0,c.padding_bottom=0,c.main_height=o,c.main_padding_top=0,c.main_padding_bottom=0,c.dates_column=[],c.columns=[],c.hidden_columns=[],c.colors={},c.names={},c.main_scale_y=1,c.map_scale_y=1,c.duration=200,s.subscribe(function(t){c.locale=t,c.createLines()}),l.subscribe(function(t){c.main_padding_top=t.main_padding_top,c.main_padding_bottom=t.main_padding_bottom,c.padding_top=t.map_padding_top,c.padding_bottom=t.map_padding_bottom,c.duration=t.animation_duration_4,c.caclMapYScale(),c.createLines(),c.columns.length>0&&c.emitUpdate()}),h.subscribe(function(t){var e=r(t,2),n=e[0],i=e[1];if("hide"==n&&c.visible_columns.length>1&&(c.hidden_columns.push(i),c.caclMapYScale(),c.hideColumn(i),c.emitUpdate()),"show"==n){var o=!1;for(var s in c.hidden_columns)c.hidden_columns.includes(i)&&(o=!0,c.hidden_columns.splice(s,1));o&&(c.hidden_columns_count--,c.caclMapYScale(),c.showColumn(i),c.emitUpdate())}}),c.navigator=new u.default({width:n,height:i,themeObserver:l}),c.navigator.on("offset",function(){return c.emitUpdate()}),c.navigator.on("scaling",function(){return c.emitUpdate()}),c.pointers=new a.Position,c.element=new a.Rectangle({clip:!0,w:n,h:i,children:[c.pointers,c.navigator.element]}),c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Event),o(e,[{key:"emitUpdate",value:function(){this.caclMainYScale(),this.emit("update",this.update_data)}},{key:"setData",value:function(t){var e=t.columns,n=t.colors,i=t.names;e=e.slice(),this.dates_column=e[0],this.columns=e.splice(1,e.length),this.colors=n,this.names=i,this.caclMapYScale(),this.createLines(),this.emitUpdate()}},{key:"hideColumn",value:function(t){var e=this;this.pointers.children.forEach(function(n){n.children.forEach(function(n){n.column_index==t&&n.toAlpha(0);var i=e.map_height-n.column_value*e.scale.y+e.min_y*e.scale.y-e.padding_bottom;i<0&&n.column_index!==t&&(i=-i),n.completed=!1,n.offset=-(n.child._y-i),n.forward()})})}},{key:"showColumn",value:function(t){this.pointers.children.forEach(function(e){e.children.forEach(function(e){e.column_index==t&&e.toAlpha(1),e.offset=-e.offset,e.completed=!1,e.forward()})})}},{key:"updateLines",value:function(){this.pointers.children.forEach(function(t){for(var e=0;e<t.children.length;e++){var n=t.children[e],i=t.children[e+1];i&&(n.column_index==i.column_index&&(n.child._x2=i.child._x,n.child._y2=i.child._y))}})}},{key:"createLines",value:function(){for(var t=this,e=[],n=0;n<this.columns.length;n++){for(var i=this.columns[n],r=new a.LinesGroup({lineWidth:2,color:this.colors[i[0]]}),o=[],s=1;s<i.length&&!(s>i.length-1);s++){var h=i[s]*this.scale.y,u=i[s+1]*this.scale.y,c=this.map_height+this.min_y*this.scale.y-this.padding_bottom,f=new l.Slide({child:new a.Line({x:(s-1)*this.scale.x,x2:s*this.scale.x,y:c-h,y2:c-u}),duration:this.duration,onProgress:function(){return t.updateLines()}});f.column_index=n,f.column_value=i[s],o.push(f)}r.children=o,e.push(r)}this.pointers.children=e}},{key:"caclMapYScale",value:function(){for(var t=[],e=0;e<this.columns.length;e++)this.hidden_columns.includes(e)||this.columns[e].forEach(function(e){return t.push(e)});var n=this.getMinMaxY(t);this.min_y=n.min,this.map_scale_y=(this.map_height-this.padding_top-this.padding_bottom)/(n.max-n.min)}},{key:"caclMainYScale",value:function(){for(var t=[],e=0;e<this.columns.length;e++)if(!this.hidden_columns.includes(e))for(var n=1;n<this.columns[e].length;n++){var i=(n-1)*this.scale.x;this.navigator.offset<i+70&&this.navigator.offset+this.navigator.width>i-70&&t.push(this.columns[e][n])}var r=this.getMinMaxY(t),o=r.max-r.min;this.main_scale_y=(this.main_height-this.main_padding_top-this.main_padding_bottom)/o,this.main_offset_y=this.main_scale_y*r.min}},{key:"getMinMaxY",value:function(t){var e=0==t.length?0:t[t.length-1],n=0;return t.forEach(function(t){n=t>n?t:n,e=t<e?t:e}),{min:e,max:n}}},{key:"main_offset",get:function(){return{x:-this.navigator.offset*(this.scale.x*this.width/this.navigator.width/this.scale.x),y:this.main_offset_y||0}}},{key:"main_scale",get:function(){return{x:this.scale.x*this.width/this.navigator.width,y:this.main_scale_y}}},{key:"update_data",get:function(){return{offset:this.main_offset,scale:this.main_scale,dates_column:this.dates_column,columns:this.columns,colors:this.colors,names:this.names}}},{key:"scale",get:function(){return{x:this.data_count>0?this.width/this.data_count:0,y:this.map_scale_y}}},{key:"data_count",get:function(){return this.columns[0]?this.columns[0].length-2:0}},{key:"visible_columns",get:function(){for(var t=[],e=0;e<this.columns.length;e++)this.hidden_columns.includes(e)||t.push(e);return t}}]),e}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(2);function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var a=function(t){function e(t){var n=t.width,i=t.height,o=t.themeObserver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.subscribe(function(t){a.scalable&&(a.offset=n-100-t.map_edge_width,a.scalable.edgeWidth=t.map_edge_width,a.background[0].w=a.offset,a.background[1].x=a.offset+a.width,a.scalable.edgeColor=a.scalable.child.borderTop.color=a.scalable.child.borderBottom.color=t.map_color1,a.background[0].color=a.background[1].color=t.map_color2)}),a.scalable=new r.Scalable({axisX:!0,width:n,onScaling:function(){return a.onScaling()},child:new r.Rectangle({w:100,h:i,borderTop:{inside:!0,width:2},borderBottom:{inside:!0,width:2}})}),a.navigator=new r.Draggable({axisX:!0,canDragX:function(t){return a.canDragX(t)},onDragging:function(){return a.onDragging()},child:a.scalable}),a.background=[new r.Rectangle({h:i,inputIgnore:!0}),new r.Rectangle({x:a.offset+a.width,w:n,h:i,inputIgnore:!0})],a.element=new r.Rectangle({w:n,h:i,children:[].concat(s(a.background),[a.navigator])}),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Event),i(e,[{key:"onScaling",value:function(){this.background[0].w=this.offset,this.background[1].x=this.offset+this.width,this.emit("scaling")}},{key:"canDragX",value:function(t){var e=t.child,n=t.x;return e.x-e._x-n>0&&n+e._x<this.scalable.edgeWidth?this.scalable.edgeWidth-e._x:e.x-e._x-n<0&&n+e.w+e._x>this.element.w-this.scalable.edgeWidth?this.element.w-e.w-this.scalable.edgeWidth-e._x:n}},{key:"onDragging",value:function(){this.background[0].w=this.offset,this.background[1].x=this.offset+this.width,this.emit("offset")}},{key:"width",get:function(){return this.navigator.child.w+2*this.scalable.edgeWidth},set:function(t){this.navigator.child.w=t}},{key:"offset",get:function(){return this.navigator.child.x-this.scalable.edgeWidth},set:function(t){this.navigator.child.x=t}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r="\n.styled-checkbox {display:none;}\n.styled-checkbox + label {\n  position: relative;\n  cursor: pointer;\n  padding: 8px 20px 8px 10px;\n  border: 1.2px solid rgba(0, 0, 0, 0.1);\n  border-radius: 20px;\n  margin-right: 20px;\n  margin-top: 15px;\n}\n.styled-checkbox:hover + label:before {\n  background: rgba(0, 0, 0, 0.05);\n}\n.styled-checkbox + label:before {\n  content: '';\n  margin-right: 12px;\n  display: inline-block;\n  vertical-align: text-top;\n  width: 24px;\n  height: 24px;\n  border: 1px solid;\n  border-radius: 100%;\n  margin-top: -3px;\n}\n.styled-checkbox:checked + label:after {\n  content: '';\n  position: absolute;\n  left: 16px;\n  top: 19px;\n  background: white;\n  width: 2px;\n  height: 2px;\n  box-shadow: 2px 0 0 white, 4px 0 0 white, 4px -2px 0 white, 4px -4px 0 white, 4px -6px 0 white, 4px -8px 0 white;\n  transform: rotate(45deg) scale(1.2);\n}",o=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.hidden_columns=[],this.hiddenColumnsObserver=i,n.subscribe(function(t){});var o=document.getElementById(e);this.ui=document.createElement("div"),o.appendChild(this.ui),this.createStyle(r)}return i(t,[{key:"createStyle",value:function(t){var e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}},{key:"setData",value:function(t){var e=t.columns,n=t.colors,i=t.names;this.columns=e,this.colors=n,this.names=i,this.update()}},{key:"update",value:function(){this.ui.innerHTML="";for(var t=1;t<this.columns.length;t++){var e=this.columns[t];this.createCheckbox(t-1,this.names[e[0]],this.colors[e[0]])}}},{key:"createCheckbox",value:function(t,e,n){var i=this,r="column_"+t+"_"+this.id,o=document.createElement("input");o.setAttribute("type","checkbox"),o.setAttribute("checked","true"),o.setAttribute("id",r),o.setAttribute("class","styled-checkbox "),o.addEventListener("change",function(){return i.toggleColumn(t)});var s=document.createElement("label");s.setAttribute("for",r),s.innerText=e,this.ui.appendChild(o),this.ui.appendChild(s);var a="\n      #"+r+".styled-checkbox + label:before {\n        border-color: "+n+";\n      }\n      #"+r+".styled-checkbox:checked + label:before {\n        background: "+n+";\n      }\n    ";this.createStyle(a)}},{key:"toggleColumn",value:function(t){if(this.hidden_columns.includes(t))for(var e in this.hiddenColumnsObserver.broadcast(["show",t]),this.hidden_columns)this.hidden_columns[e]==t&&this.hidden_columns.splice(e,1);else this.hidden_columns.push(t),this.hiddenColumnsObserver.broadcast(["hide",t]);if(this.columns.length-1-this.hidden_columns.length==1){for(var n=void 0,i=1;i<this.columns.length;i++)this.hidden_columns.includes(i-1)||(n=i-1);var r="column_"+n+"_"+this.id;document.getElementById(r).setAttribute("disabled",!0)}else for(var o=1;o<this.columns.length;o++){var s="column_"+(o-1)+"_"+this.id;document.getElementById(s).removeAttribute("disabled")}}}]),t}();e.default=o}]);