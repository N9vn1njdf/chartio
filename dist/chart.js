!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Curves=e.Animation=e.Component=e.Chart=void 0;var i=s(n(11)),o=s(n(14)),r=s(n(15)),a=s(n(16));function s(t){return t&&t.__esModule?t:{default:t}}e.Chart=i.default,e.Component=o.default,e.Animation=r.default,e.Curves=a.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DragScaling=e.Position=e.Rectangle=e.Circle=e.Text=e.LinesGroup=e.Line=void 0;var i=h(n(18)),o=h(n(21)),r=h(n(22)),a=h(n(23)),s=h(n(8)),l=h(n(24)),u=h(n(25));function h(t){return t&&t.__esModule?t:{default:t}}e.Line=i.default,e.LinesGroup=o.default,e.Text=r.default,e.Circle=a.default,e.Rectangle=s.default,e.Position=l.default,e.DragScaling=u.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Columns=e.Hover=e.YAxis=e.Lines=e.Dates=e.Popup=e.Checkboxes=e.Map=e.Navigator=void 0;var i=f(n(17)),o=f(n(26)),r=f(n(27)),a=f(n(28)),s=f(n(30)),l=f(n(31)),u=f(n(32)),h=f(n(33)),c=f(n(34));function f(t){return t&&t.__esModule?t:{default:t}}e.Navigator=i.default,e.Map=o.default,e.Checkboxes=r.default,e.Popup=a.default,e.Dates=s.default,e.Lines=l.default,e.YAxis=u.default,e.Hover=h.default,e.Columns=c.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseElement=e.HasChild=e.HasChildren=e.RenderElement=void 0;var i=s(n(5)),o=s(n(19)),r=s(n(7)),a=s(n(20));function s(t){return t&&t.__esModule?t:{default:t}}e.RenderElement=i.default,e.HasChildren=o.default,e.HasChild=r.default,e.MouseElement=a.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners={}}return i(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"emit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.listeners[t]&&this.listeners[t].forEach(function(t){return t(e,n)})}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(4),a=(i=r)&&i.__esModule?i:{default:i};var s=function(t){function e(t){var n=t.x,i=t.y,o=t.alpha;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.alpha=null!=o?o:1,r.x=r._globalX=n||0,r.y=r._globalY=i||0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"updateChild",value:function(){}},{key:"isVisible",value:function(t,e){return!1}},{key:"x",get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.parent&&(this._globalX=t+this.parent._globalX),this.updateChild())}},{key:"y",get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.parent&&(this._globalY=t+this.parent._globalY),this.updateChild())}},{key:"x2",get:function(){return this._x2},set:function(t){this._x2!=t&&(this._x2=t,this.parent&&(this.globalX2=t+this.parent.globalX),this.updateChild())}},{key:"y2",get:function(){return this._y2},set:function(t){this._y2!=t&&(this._y2=t,this.parent&&(this.globalY2=t+this.parent.globalY),this.updateChild())}},{key:"globalX",get:function(){return this._globalX},set:function(t){this._globalX!=t&&(this._globalX=t,this.updateChild())}},{key:"globalY",get:function(){return this._globalY},set:function(t){this._globalY!=t&&(this._globalY=t,this.updateChild())}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=a(n(12)),r=a(n(13));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){var n=this,i=e.id,a=e.width,s=e.height,l=e.theme,u=e.locale,h=e.components;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=i;var c=document.createElement("canvas");c.style.width=a+"px",c.style.height=s+"px",c.style.background=l.background,document.getElementById(i).appendChild(c),this.theme=l,this.locale=u,this.canvas=c,this.canvas.width=this.width=a/100*120,this.canvas.height=this.height=s/100*120,this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",this.ctx.width=this.width,this.ctx.height=this.height,this.ctx.miterLimit=1,this.input=new o.default(this),this.show_column_observer=new r.default,this.hide_column_observer=new r.default,this.components=h||[],this.need_update=!1,requestAnimationFrame(function(t){return n._render(t)})}return i(t,[{key:"setData",value:function(t){var e=this;this.data=t,this._eachComponent(function(t){return t._onData(e.data)}),this.update()}},{key:"setTheme",value:function(t){var e=this;this.theme=t,this.canvas.style.background=t.background,this._eachComponent(function(t){return t._onTheme(e.theme)})}},{key:"setLocale",value:function(t){var e=this;this.locale=t,this._eachComponent(function(t){return t._onLocale(e.locale)})}},{key:"_eachComponent",value:function(t){this._findComponentInChildren(this.components,t)}},{key:"_findComponentInChildren",value:function(t,e){var n=this;t.forEach(function(t){t.$is_component&&(e.call(n,t),t=t.$element?t.$element:t),t.children?n._findComponentInChildren(t.children,e):t.child&&n._findComponentInChildren([t.child],e)})}},{key:"_initComponent",value:function(t){t._init(this),this.show_column_observer.subscribe(function(e){return t._onShowColumn(e)}),this.hide_column_observer.subscribe(function(e){return t._onHideColumn(e)})}},{key:"update",value:function(){this.need_update=!0}},{key:"_render",value:function(t){var e=this;this.need_update&&(this.need_update=!1,this.ctx.clearRect(0,0,this.width,this.height),this.components.forEach(function(n){return n.render(e.ctx,e.input,t)})),requestAnimationFrame(function(t){return e._render(t)})}},{key:"components",get:function(){return this._components},set:function(t){this._components=t,this._eachComponent(this._initComponent)}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(5),a=(i=r)&&i.__esModule?i:{default:i};var s=function(t){function e(t){var n=t.x,i=t.y,o=t.child;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:n,y:i}));return r.child=o,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"updateChild",value:function(){this.child&&(this.child.globalY=this.child.y+this.globalY,this.child.globalX=this.child.x+this.globalX)}},{key:"render",value:function(t,e,n){this._child&&(this._child.$is_component||this._child.isVisible(t.width,t.height))&&this._child.render(t,e,n)}},{key:"child",get:function(){return this._child},set:function(t){t&&(t.parent=this,this._child=t,this.updateChild())}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3);var r=function(t){function e(t){var n=t.w,i=t.h,o=t.clip,r=t.border;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return a.w=n,a.h=i,a.clip=o||!1,a.border=r,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MouseElement),i(e,[{key:"isVisible",value:function(t,e){return 0!=this.w&&0!=this.h&&0!=this.alpha&&(this.globalX+this.w>0&&this.globalX<t)}},{key:"fillRoundedRect",value:function(t,e,n,i,o,r){t.beginPath(),t.moveTo(e,n),t.arcTo(e+i,n,e+i,n+o,r.tr),t.arcTo(e+i,n+o,e,n+o,r.br),t.arcTo(e,n+o,e,n,r.bl),t.arcTo(e,n,e+i,n,r.tl),t.fill()}},{key:"render",value:function(t,n,i){this.clip,t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),this.color&&(t.fillStyle!==this.color&&(t.fillStyle=this.color),this.border?this.fillRoundedRect(t,this.globalX,this.globalY,this.w,this.h,this.border):t.fillRect(this.globalX,this.globalY,this.w+.12,this.h)),function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n,i),this.clip}}]),e}();e.default=r},function(t,e,n){"use strict";var i=r(n(10)),o=r(n(37));function r(t){return t&&t.__esModule?t:{default:t}}window.LineChart=i.default,window.BarChart=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=n(2),a=l(n(35)),s=l(n(36));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Chart),i(e,[{key:"$onCreate",value:function(t,e){var n=this;this.columns=new a.default,this.hover=new r.Hover({showCircles:!0}),this.dates=new r.Dates,this.y_axis=new r.YAxis,this.lines=new r.Lines,this.map=new s.default,this.map.on("update",function(t){n.columns.onMapUpdate(t),n.hover.onMapUpdate(t),n.lines.onMapUpdate(t),n.dates.onMapUpdate(t),n.y_axis.onMapUpdate(t)}),this.checkboxes=new r.Checkboxes}},{key:"$onCreated",value:function(t,e){}},{key:"darkTheme",get:function(){return{name:"dark",background:"#242f3e",main_padding:20,main_margin:25,main_animation_duration:340,map_height:56,map_padding:2,map_margin:20,map_animation_duration:340,dates_height:46,dates_animation_duration:80,dates_text_color:"#99a4ac",map_color1:"#56626D",map_color2:"rgba(48, 66, 89, 0.6)",map_navigator_edge_width:14,map_navigator_min_width:2,font_family:"Arial",text_color1:"#99a4ac",text_size1:14,text_size2:14,lines_color:"rgba(255, 255, 255, 0.1)",lines_count:6,lines_animation_duration:340,y_axis_animation_duration:340}}},{key:"defaultTheme",get:function(){return{name:"default",background:"#fff",main_padding:20,main_margin:25,main_animation_duration:340,map_height:56,map_padding:2,map_margin:20,map_animation_duration:340,dates_height:46,dates_animation_duration:80,dates_text_color:"#99a4ac",map_color1:"#C0D1E1",map_color2:"rgba(226, 238, 249, 0.6)",map_navigator_edge_width:14,map_navigator_min_width:2,font_family:"Arial",text_color1:"#99a4ac",text_size1:14,text_size2:14,lines_color:"rgba(24, 45, 59, 0.1)",lines_count:6,lines_animation_duration:340,y_axis_animation_duration:340}}},{key:"defaultLocale",get:function(){return{month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}},{key:"components",get:function(){return[this.lines,this.columns,this.hover,this.y_axis,this.dates,this.map,this.checkboxes]}}],[{key:"ruLocale",get:function(){return{month:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],day:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]}}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(6),a=(i=r)&&i.__esModule?i:{default:i};var s=function(){function t(e,n,i,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=this._merge(o,this.defaultTheme),r=this._merge(r,this.defaultLocale),this.scaffold=new a.default({id:e,width:n,height:i,theme:o,locale:r}),this.$onCreate(o,r),this.scaffold.components=this.components,this.$onCreated(o,r)}return o(t,[{key:"$onCreate",value:function(t,e){}},{key:"$onCreated",value:function(t,e){}},{key:"setData",value:function(t){this.scaffold.setData(t)}},{key:"setTheme",value:function(t){this.scaffold.setTheme(this._merge(this[t],this.defaultTheme))}},{key:"setLocale",value:function(t){this.scaffold.setLocale(this._merge(this[t],this.defaultLocale))}},{key:"_merge",value:function(t,e){if(!t)return e;for(var n in e)t[n]||(t[n]=e[n]);return t}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(4),r=(i=o)&&i.__esModule?i:{default:i};var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.canvas=t.canvas,n.x=n.y=null,n.down=!1;var i=n;return n.canvas.addEventListener("mouseout",function(){return t.update()}),document.addEventListener("mousemove",function(e){i.el=null,i.event=e,i.pageX=e.pageX,i.pageY=e.pageY;var n=i.canvas.getBoundingClientRect();i.x=(e.x-n.left)/100*120,i.y=(e.y-n.top)/100*120,e.target==i.canvas?t.update():document.mousedown_scaffold&&document.mousedown_scaffold.update()}),document.addEventListener("mousedown",function(e){i.event=e,i.pageX=e.pageX,i.pageY=e.pageY,document.mousedown_scaffold=t,e.target==i.canvas&&(i.down=!0,i.emit("down",i),t.update())}),document.addEventListener("mouseup",function(e){i.el=null,i.event=e,i.pageX=e.pageX,i.pageY=e.pageY,document.mousedown_scaffold=null,e.target==i.canvas&&(i.down=!1),i.emit("up",i),t.update()}),n.canvas.addEventListener("touchmove",function(e){var n=e.targetTouches[0];i.el=null,i.event=n,i.pageX=n.pageX,i.pageY=n.pageY;var o=i.canvas.getBoundingClientRect();i.x=(n.clientX-o.left)/100*120,i.y=(n.clientY-o.top)/100*120,e.target==i.canvas?(i.down||(i.down=!0,i.emit("down",i),document.mousedown_scaffold=t),t.update()):document.mousedown_scaffold&&document.mousedown_scaffold.update()}),document.addEventListener("touchend",function(e){i.el=null,i.event=e,i.pageX=e.pageX,i.pageY=e.pageY,document.mousedown_scaffold=null,e.target==i.canvas&&(i.down=!1),i.emit("up",i),t.update()}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observers=[]}return i(t,[{key:"subscribe",value:function(t){this.observers.push(t)}},{key:"broadcast",value:function(t){this.observers.forEach(function(e){return e(t)})}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=r(n(4));r(n(6));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.$is_component=!0,t.$theme,t.$locale,t.$dates=[],t.$columns=[],t.$colors=[],t.$names=[],t.$hidden_columns=[],t.$visible_columns=[],t.$canvas,t.$scaffold,t._animations=[],t._mounted=!1,t.x=t._globalX=0,t.y=t._globalY=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"$update",value:function(){this.$scaffold.update()}},{key:"$onTheme",value:function(t){}},{key:"$onLocale",value:function(t){}},{key:"$onData",value:function(t){}},{key:"$showColumn",value:function(t){this.$scaffold.show_column_observer.broadcast(t)}},{key:"$onShowColumn",value:function(t){}},{key:"$hideColumn",value:function(t){this.$scaffold.hide_column_observer.broadcast(t)}},{key:"$onHideColumn",value:function(t){}},{key:"_onHideColumn",value:function(t){this.$hidden_columns.push(t),this._calcVisibleColumns(),this.$onHideColumn(t)}},{key:"_onShowColumn",value:function(t){for(var e=0;e<this.$hidden_columns.length;e++)t==this.$hidden_columns[e]&&this.$hidden_columns.splice(e,1);this._calcVisibleColumns(),this.$onShowColumn(t)}},{key:"_onData",value:function(t){var e=t.columns,n=t.colors,i=t.names;this.$dates=e[0],this.$columns=e.slice(1,e.length),this.$colors=n,this.$names=i,this._calcVisibleColumns(),this.$onData({dates:this.$dates,columns:this.$columns,colors:n,names:i})}},{key:"_onTheme",value:function(t){this.$theme=t,this.$onTheme(t)}},{key:"_onLocale",value:function(t){this.$locale=t,this.$onLocale(t)}},{key:"_calcVisibleColumns",value:function(){for(var t=[],e=0;e<this.$columns.length;e++)this.$hidden_columns.includes(e)||t.push(e);this.$visible_columns=t}},{key:"_init",value:function(t){this.$scaffold=t,this.$canvas=t.canvas,this.$theme=t.theme,this.$locale=t.locale,this.$build&&(this.$element=this.$build(t.theme,t.locale),this.$element&&(this.$element.parent=this,this.child=this.$element))}},{key:"updateChild",value:function(){this.child&&(this.child.globalY=this.child.y+this.globalY,this.child.globalX=this.child.x+this.globalX)}},{key:"render",value:function(t,e,n){this.$element&&(this.$element.$is_component||this.$element.isVisible(t.width,t.height))&&this.$element.render(t,e,n);for(var i=0;i<this._animations.length;i++)this._animations[i].running&&this._animations[i]._step(n)}},{key:"parent",set:function(t){this.$element&&(this.$element.parent=t,t.$element&&(this.$element.globalY=t.$element.globalY,this.$element.globalX=t.$element.globalX))}},{key:"globalX",get:function(){return this._globalX},set:function(t){this._globalX!=t&&(this._globalX=t,this.updateChild())}},{key:"globalY",get:function(){return this._globalY},set:function(t){this._globalY!=t&&(this._globalY=t,this.updateChild())}},{key:"child",get:function(){return this._child},set:function(t){t&&(t.parent=this,this._child=t,this.updateChild())}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(e){var n=e.component,i=e.duration,o=e.curve,r=e.onStart,a=e.onEnd,s=e.handle;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.component=n,this.duration=i,this.curve=o,this.onStart=r,this.onEnd=a,this.handle=s,this.running=!1,n._animations.push(this)}return i(t,[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._data=t,this.onStart&&this.onStart.call(this.component,t),this.start_time=performance.now(),this.running=!0,this.component.$update()}},{key:"_step",value:function(t){(t=(t-this.start_time)/this.duration)>1?t=1:t<0&&(t=0),this.handle.call(this.component,this.curve(t),this._data),1==t&&(this.running=!1,this.onEnd&&this.onEnd.call(this.component)),this.component.$update()}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=n(1);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Component),i(e,[{key:"$onTheme",value:function(t){this.navigator.edgeWidth=t.map_navigator_edge_width,this.navigator.minWidth=t.map_navigator_min_width>>>0,this.navigator.edgeColor=this.border[0].color=this.border[1].color=t.map_color1,this.background[0].color=this.background[1].color=t.map_color2}},{key:"$build",value:function(t,e){var n=this;return this.height=t.map_height,this.navigator=new r.DragScaling({axisX:{min:0,max:this.$canvas.width-2*t.map_margin},onUpdate:function(){return n.update()},w:40,h:this.height,edgeWidth:t.map_navigator_edge_width,edgeColor:t.map_color1,minWidth:t.map_navigator_min_width}),this.offset=this.$canvas.width-2*t.map_margin-this.scale+t.map_navigator_edge_width,this.background=[new r.Rectangle({h:this.height,color:t.map_color2,border:{tr:0,tl:8,br:0,bl:8},ignoreInput:!0}),new r.Rectangle({h:this.height,color:t.map_color2,border:{tr:8,tl:0,br:8,bl:0},ignoreInput:!0})],this.border=[new r.Rectangle({h:2,color:t.map_color1}),new r.Rectangle({h:2,y:this.height-2,color:t.map_color1})],this.update(!1),new r.Position({w:this.$canvas.width,h:this.height,children:[].concat(a(this.background),a(this.border),[this.navigator])})}},{key:"update",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.background[0].w=this.offset+this.navigator.edgeWidth,this.background[1].x=this.navigator.x+this.navigator.w,this.background[1].w=this.$canvas.width-this.background[1].x-2*this.$theme.map_margin,this.border[0].w=this.border[1].w=this.navigator.w,this.border[0].x=this.border[1].x=this.navigator.x,t&&this.emit("update")}},{key:"scale",get:function(){return this.navigator.w+2*this.navigator.edgeWidth},set:function(t){this.navigator.w=t}},{key:"offset",get:function(){return this.navigator.x-this.navigator.edgeWidth},set:function(t){this.navigator.x=t}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3);var r=function(t){function e(t){var n=t.x2,i=t.y2;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return o.x2=n,o.y2=i,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.RenderElement),i(e,[{key:"isVisible",value:function(t,e){return(this.globalX>0||this.globalX2>0)&&this.globalX<t}},{key:"render",value:function(t,e,n){t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),t.moveTo(this.globalX,this.globalY),t.lineTo(this.globalX2,this.globalY2)}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(5),a=(i=r)&&i.__esModule?i:{default:i};var s=function(t){function e(t){var n=t.x,i=t.y,o=t.children;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:n,y:i}));return r.children=o||[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"updateChild",value:function(){var t=this;this.children.forEach(function(e){e.globalX=e.x+t.globalX,e.globalY=e.y+t.globalY})}},{key:"render",value:function(t,e,n){this.isVisible(t.width,t.height)&&this._children.forEach(function(i){(i.$is_component||i.isVisible(t.width,t.height))&&i.render(t,e,n)})}},{key:"children",get:function(){return this._children||[]},set:function(t){for(var e in t)t[e].parent=this;this._children=t,this.updateChild()}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(7),a=(i=r)&&i.__esModule?i:{default:i};var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,i=t.y,o=t.child,r=t.color,a=t.alpha,s=t.ignoreInput;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:n,y:i,child:o}));return l.color=r,l.alpha=null!=a?a:1,l.ignoreInput=s||!1,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"isHover",value:function(t,e){return t>this.globalX&&t<this.globalX+this.w&&e>this.globalY&&e<this.globalY+this.h}},{key:"onDown",value:function(t){this.isHover(t.x,t.y)&&this.color&&this.alpha>0&&(!this.ignoreInput||0==this.listeners.length)&&(this._mouse_down=!0,this.emit("down",t,this))}},{key:"onUp",value:function(t){this._move=!1,this._mouse_down&&(this._mouse_down=!1,this.emit("up",t,this))}},{key:"render",value:function(t,n,i){var o=this;(function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n,i),this._has_input_event||(this._has_input_event=!0,n.on("down",function(t){return o.onDown(t)}),n.on("up",function(t){return o.onUp(t)})),this.isHover(n.x,n.y)?(n.el||this.ignoreInput||(n.el=this),this._move=!0,this.emit("move",n,this)):this._move&&(this._move=!1,this.emit("leave",n,this))}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3);var r=function(t){function e(t){var n=t.x,i=t.y,o=t.children,r=t.lineWidth,a=t.color,s=t.lineCap;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:n,y:i,children:o}));return l.lineWidth=r,l.color=a,l.lineCap=s||"butt",l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.HasChildren),i(e,[{key:"updateChild",value:function(){var t=this;this.children.forEach(function(e){e.globalX=e.x+t.globalX,e.globalY=e.y+t.globalY,e.globalX2=e.x2+t.globalX,e.globalY2=e.y2+t.globalY})}},{key:"isVisible",value:function(t,e){return!0}},{key:"render",value:function(t,n,i){t.lineCap!=this.lineCap&&(t.lineCap=this.lineCap),t.strokeStyle!==this.color&&(t.strokeStyle=this.color),t.lineWidth!==this.lineWidth&&(t.lineWidth=this.lineWidth),t.beginPath(),function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n,i),t.closePath(),t.stroke()}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3);var r=function(t){function e(t){var n=t.text,i=t.size,o=t.fontFamily,r=t.align,a=t.color;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return s.color=a,s.text=n+""||"",s.size=i||14,s.fontFamily=o||"Arial",s.align=r||"left",s.cached=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.RenderElement),i(e,[{key:"isVisible",value:function(t,e){return!(0==this.alpha||0==this.size||0==this.text.length||!this.color||"transparent"==this.color)&&(this.globalX+this.size*this.text.length>=0&&this.globalX<t)}},{key:"render",value:function(t,e,n){t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),t.fillStyle!==this.color&&(t.fillStyle=this.color),t.font!==this.size+"px "+this.fontFamily&&(t.font=this.size+"px "+this.fontFamily),t.textAlign!==this.align&&(t.textAlign=this.align),t.fillText(this.text,this.globalX,this.globalY)}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3);var r=function(t){function e(t){var n=t.r,i=t.color,o=t.border;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]));return r.r=n,r.color=i,r.border=o,r._endAngle=2*Math.PI,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.RenderElement),i(e,[{key:"isVisible",value:function(t,e){return!(0==this.r||0==this.alpha||!this.color||"transparent"==this.color)&&(this.globalX+this.r/2>0&&this.globalX-this.r/2<t)}},{key:"render",value:function(t,e,n){t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),t.fillStyle!==this.color&&(t.fillStyle=this.color),t.beginPath(),t.arc(this.globalX,this.globalY,this.r,0,this._endAngle),t.fill(),this.border&&(t.strokeStyle!==this.border.color&&(t.strokeStyle=this.border.color),t.lineWidth!==this.border.w&&(t.lineWidth=this.border.w),t.stroke())}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3);var r=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.w,i=t.h,o=t.alpha;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,arguments[0]||{}));return r.w=n||0,r.h=i||0,r.alpha=o,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.HasChildren),i(e,[{key:"isVisible",value:function(t,e){return 0!==this.alpha}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(8),a=(i=r)&&i.__esModule?i:{default:i},s=n(3);var l=function(t){function e(t){var n=t.x,i=t.y,o=t.w,r=t.h,a=t.axisX,s=t.minWidth,l=t.onUpdate,u=t.edgeColor,h=t.edgeWidth;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:n,y:i}));return c.w=o,c.h=r,c.axisX=a,c.minWidth=null!==s?s:10,c.onUpdate=l,c.edgeColor=u||"rgba(0, 0, 0, 0.2)",c.edgeWidth=h||5,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.HasChildren),o(e,[{key:"isVisible",value:function(t,e){return!0}},{key:"_updateChildren",value:function(){var t=this,e=new a.default({x:15,w:this.edgeWidth,h:this.h,color:this.edgeColor,border:{tr:0,tl:8,br:0,bl:8},ignoreInput:!0,child:new a.default({x:this.edgeWidth/2-1.5,y:this.h/2-6,w:3,h:12,color:"#fff"})});this.left=new a.default({x:-this.edgeWidth-15,w:this.edgeWidth+15,h:this.h,color:"transparent",child:e}),this.left.on("down",function(){return t.left._scaling=!0}),this.left.on("up",function(){return t._stop()});var n=new a.default({w:this.edgeWidth,h:this.h,color:this.edgeColor,border:{tr:8,tl:0,br:8,bl:0},ignoreInput:!0,child:new a.default({x:this.edgeWidth/2-1.5,y:this.h/2-7,w:3,h:14,color:"#fff"})});this.right=new a.default({x:this.w,w:this.edgeWidth+15,h:this.h,color:"transparent",child:n}),this.right.on("down",function(){return t.right._scaling=!0}),this.right.on("up",function(){return t._stop()}),this.center=new a.default({w:this.w,h:this.h,color:"transparent"}),this.center.on("down",function(){return t._dragging=!0}),this.center.on("up",function(){return t._stop()}),this.children=[this.left,this.center,this.right]}},{key:"_stop",value:function(){this._dragging=!1,this.left._scaling=!1,this.right._scaling=!1,this._inputOffset=null}},{key:"_scaleLeft",value:function(t){this._inputOffset||(this._inputOffset={x:t.x-this.x,w:this.w+this.x});var e=t.x-this._inputOffset.x;e-this.edgeWidth<this.axisX.min&&(e=this.axisX.min+this.edgeWidth),this._inputOffset.w-e<this.minWidth&&(e-=this.minWidth-(this._inputOffset.w-e)),this.w=this.right.x=this._inputOffset.w-e,this.x=e}},{key:"_scaleRight",value:function(t){this._inputOffset||(this._inputOffset={x:t.x-this.w,w:this.w+this._x});var e=t.x-this._inputOffset.x;this.x+e+this.edgeWidth>=this.axisX.max&&(e=this.axisX.max-this.x-this.edgeWidth),e<this.minWidth&&(e=this.minWidth),this.w=this.right.x=e}},{key:"_drag",value:function(t){this._inputOffset||(this._inputOffset={x:t.x-this.x,w:this.w+this.x});var e=t.x-this._inputOffset.x;e-this.edgeWidth<this.axisX.min&&(e=this.axisX.min+this.edgeWidth),e+this.w+this.edgeWidth>this.axisX.max&&(e=this.axisX.max-this.w-this.edgeWidth),this.x=e}},{key:"render",value:function(t,n,i){(function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,n,i),this._dragging&&this._drag(n),this.left._scaling&&(this._scaleLeft(n),this.center.w=this.w),this.right._scaling&&(this._scaleRight(n),this.center.w=this.w),(this.left._scaling||this.right._scaling||this._dragging)&&this.onUpdate()}},{key:"edgeColor",get:function(){return this._edgeColor},set:function(t){this._edgeColor=t,this._updateChildren()}},{key:"edgeWidth",get:function(){return this._edgeWidth},set:function(t){this._edgeWidth=t>>0,this._updateChildren()}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=n(1),s=n(2);var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),o(e,[{key:"$onTheme",value:function(t){this.padding=t.map_padding,this.animation.duration=t.map_animation_duration,this.map_height=t.map_height,this.map_width=this.$canvas.width-2*this.$theme.map_margin,this.main_height=this.$canvas.height-t.map_height-t.dates_height-t.main_padding,this.main_width=this.$canvas.width-2*this.$theme.main_margin}},{key:"$onData",value:function(t){t.dates,t.columns,t.colors,t.names;this.calcMapYScale(),this.calcMapVerticalOffset(),this.columns.children=this.createColumns(),this.needMainUpdate&&this.calcMainYScale()}},{key:"$onHideColumn",value:function(t){this.prev_update_data=null,this.calcMapYScale(),this.calcMapVerticalOffset(),this.needMainUpdate&&this.calcMainYScale(),this.animation.run([!0,t])}},{key:"$onShowColumn",value:function(t){this.prev_update_data=null,this.calcMapYScale(),this.calcMapVerticalOffset(),this.needMainUpdate&&this.calcMainYScale(),this.animation.run([!1,t])}},{key:"$build",value:function(t,e){var n=this;return this.animation=new r.Animation({component:this,duration:t.map_animation_duration,curve:r.Curves.easeOutCubic,onStart:this.startAnimate,handle:this.animate}),this.navigator=new s.Navigator,this.navigator.on("update",function(){n.needMainUpdate&&n.calcMainYScale()}),this.columns=new a.Position,this.$onTheme(t),new a.Rectangle({x:t.map_margin,y:this.$canvas.height-t.map_height,w:this.$canvas.width,h:this.map_height,child:new a.Position({children:[this.columns,this.navigator]})})}},{key:"getMinMaxY",value:function(t){var e=0==t.length?0:t[t.length-1],n=0;return t.forEach(function(t){n=t>n?t:n,e=t<e?t:e}),{min:e,max:n}}},{key:"calcMapVerticalOffset",value:function(){this.vertical_offset=this.$theme.map_height+this.min_y*this.scale.y-this.padding}},{key:"startAnimate",value:function(t){var e=i(t,2);e[0],e[1]}},{key:"animate",value:function(t,e){var n=i(e,2);n[0],n[1]}},{key:"createColumns",value:function(){}},{key:"calcMapYScale",value:function(){}},{key:"calcMainYScale",value:function(){}},{key:"update_data",get:function(){var t=this.scale.x*this.main_width/this.navigator.scale;return{offset:{x:-this.navigator.offset*(t/this.scale.x),y:this.main_offset_y||0},scale:{x:t,y:this.main_scale_y,is_full:this.navigator.scale==this.map_width}}}},{key:"scale",get:function(){return{x:this.$columns[0]?this.map_width/(this.$columns[0].length-2):0,y:this.map_scale_y}}},{key:"needMainUpdate",get:function(){return(!this.prev_update_data||this.prev_update_data.offset.x!=this.update_data.offset.x||this.prev_update_data.offset.y!=this.update_data.offset.y||this.prev_update_data.scale.x!=this.update_data.scale.x||this.prev_update_data.scale.y!=this.update_data.scale.y||this.prev_map_scale.y!=this.scale.y)&&(this.prev_update_data=this.update_data,this.prev_map_scale=this.scale,!0)}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);var r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Component),i(e,[{key:"$onData",value:function(t){t.dates;var e=t.columns,n=t.colors,i=t.names;if(this.ui.innerHTML="",1!=e.length)for(var o=0;o<e.length;o++){var r=e[o];this.createCheckbox(o,i[r[0]],n[r[0]])}}},{key:"$build",value:function(t,e){this.id=this.$scaffold.id,this.ui=document.createElement("div"),this.ui.setAttribute("class","chart-checkboxes"),document.getElementById(this.id).appendChild(this.ui)}},{key:"createCheckbox",value:function(t,e,n){var i=this,o="column_"+t+"_"+this.id,r=document.createElement("input");r.setAttribute("type","checkbox"),r.setAttribute("checked","true"),r.setAttribute("id",o),r.setAttribute("class","chart-checkbox"),r.addEventListener("change",function(e){return i.toggleColumn(e,t)});var a=document.createElement("label");a.setAttribute("for",o),a.innerText=e,a.style.background=n,this.ui.appendChild(r),this.ui.appendChild(a)}},{key:"toggleColumn",value:function(t,e){t.target.checked?this.$showColumn(e):this.$hideColumn(e)}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=n(29);var a=function(t){function e(t){var n=t.showTotal;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.showTotal=n||!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Component),i(e,[{key:"$onTheme",value:function(t){this.div.setAttribute("class","chart-popup "+t.name+"-theme")}},{key:"$build",value:function(t,e){this.id=this.$scaffold.id,this.index,this.createPopup()}},{key:"show",value:function(t){t+=1,null==this.index?this.createPopupData(t):this.index!==t&&this.animatePopupData(t),this.index=t,this.rect||(this.rect=this.$canvas.getBoundingClientRect()),this.div.style.display="block";var e=this.$scaffold.input.pageY-this.div.offsetHeight-10,n=this.$scaffold.input.pageX-this.div.offsetWidth/2;this.$scaffold.input.pageX+this.div.offsetWidth>this.$canvas.width?n=this.rect.left+this.$canvas.width-this.div.offsetWidth-this.div.offsetWidth/2:n<0&&(n=0),this.div.style.top=e+"px",this.div.style.left=n+"px"}},{key:"hide",value:function(){this.div.style.display="none",this.index=null}},{key:"createPopup",value:function(){this.div=document.createElement("div"),this.div.setAttribute("class","chart-popup "+this.$theme.name+"-theme"),this.date_text=document.createElement("div"),this.date_text.setAttribute("class","chart-popup-date"),this.div.appendChild(this.date_text),this.div_columns=document.createElement("div"),this.div_columns.setAttribute("class","chart-popup-values"),this.div.appendChild(this.div_columns),document.body.appendChild(this.div)}},{key:"createColumnInfo",value:function(t,e,n){this.slide_count||(this.slide_count={});var i=document.createElement("div");i.setAttribute("class","chart-popup-value");var o=document.createElement("div");o.style.color=e,o.setAttribute("class","chart-popup-value-count"),i.appendChild(o),this.slide_count[t]=new r.SlideText(n,o);var a=document.createElement("div");a.setAttribute("class","chart-popup-value-label"),a.innerHTML=t,i.appendChild(a),this.div_columns.appendChild(i)}},{key:"createPopupData",value:function(t){this.div_columns.innerHTML=null,this.date_text.innerHTML=null;for(var e=0,n=0;n<this.$columns.length;n++)if(!this.$hidden_columns.includes(n)){var i=this.$columns[n],o=this.$names[i[0]],a=i[t];e+=a,a=a.toLocaleString(),this.createColumnInfo(o,this.$colors[i[0]],a)}this.showTotal&&this.$columns.length>1&&this.createColumnInfo("All","inherit",e);var s=this.getDateByIndex(t);this.slide_date=new r.SlideText(s[0]+", "+s[1]+" "+s[2]+" "+s[3],this.date_text)}},{key:"animatePopupData",value:function(t){var e=this.getDateByIndex(t);this.slide_date.animateTo(e[0]+", "+e[1]+" "+e[2]+" "+e[3],this.index<t?"bottom":"top");for(var n=0,i=0;i<this.$columns.length;i++)if(!this.$hidden_columns.includes(i)){var o=this.$columns[i],r=this.$names[o[0]],a=o[t];n+=a,a=a.toLocaleString(),this.slide_count[r].animateTo(a,this.index<t?"bottom":"top")}this.showTotal&&this.$columns.length>1&&(n=n.toLocaleString(),this.slide_count.All.animateTo(n,this.index<t?"bottom":"top"))}},{key:"getDateByIndex",value:function(t){var e=new Date(this.$dates[t]);return[this.$locale.day[e.getDay()],e.getDate(),this.$locale.month[e.getMonth()],e.getFullYear()]}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=document.createElement("span"),this.container.setAttribute("class","text-animation"),this.container.addEventListener("transitionend",function(){return i._ended()},!1),n.appendChild(this.container),this.value=document.createElement("span"),this.value.innerText=e,this.container.style.width=8*this.value.innerText.length+"px",this.container.appendChild(this.value)}return i(t,[{key:"animateTo",value:function(t,e){var n=this;this.progress||(this.progress=!0,this.done=!1,this.next&&(this.value=this.next),this.next=document.createElement("span"),this.next.textContent=t,this.container.appendChild(this.next),this.container.style.width=8*this.next.textContent.length+"px",this.next.style.top="top"==e?"20px":"-20px",setTimeout(function(){n.value.setAttribute("class",e),n.next.setAttribute("class",e)},10))}},{key:"_ended",value:function(){var t=this;this.progress=!1,this.done||(this.done=!0,this.next.removeAttribute("style"),this.next.removeAttribute("class"),this.next.removeEventListener("transitionend",function(){return t.ended()}),this.container.removeChild(this.value))}}]),t}();e.SlideText=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=n(1);var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Component),i(e,[{key:"$onTheme",value:function(t){this.color=t.dates_text_color,this.font_size=t.text_size2,this.font_family=t.font_family,this.item_width=3.5*this.font_size,this.createDates(),this.animation.duration=t.dates_animation_duration}},{key:"$onLocale",value:function(t){this.createDates()}},{key:"$build",value:function(t,e){return this.hidden_levels=[],this.color=t.dates_text_color,this.font_size=t.text_size2,this.font_family=t.font_family,this.item_width=3.5*this.font_size,this.animation=new o.Animation({component:this,duration:t.dates_animation_duration,curve:function(t){return Math.pow(t,1)},handle:this.animate}),new r.Position({y:this.$canvas.height-t.map_height-t.dates_height})}},{key:"onMapUpdate",value:function(t){var e=t.offset,n=t.scale;this.offset=e,this.prev_scale=this.scale,this.scale=n,this.$element.w=(this.$columns[0].length-2)*this.scale.x,this.$element.x=e.x+this.$theme.main_margin,0==this.$element.children.length?(this.calcHidden(!0),this.createDates()):(this.calcHidden(),this.updateDates())}},{key:"createDates",value:function(){for(var t=[],e=1;e<this.$dates.length;e++){var n=new Date(this.$dates[e]),i=n.getDate(),o=this.$locale.month[n.getMonth()],a=(e-1)*this.scale.x-this.font_size/5,s=new r.Text({alpha:this.hidden.includes(e-1)?0:1,x:a,y:14,text:o+" "+i,size:this.font_size,fontFamily:this.font_family,color:this.color,align:"center"});t.push(s)}this.$element.children=t}},{key:"updateDates",value:function(){for(var t=0;t<this.$element.children.length;t++){var e=this.$element.children[t];e.x=t*this.scale.x-this.font_size/5,this.hidden.includes(t)?e.new_alpha=0==t&&this.scale.is_full?1:0:e.new_alpha=1,e.old_alpha=e.alpha,e.alpha_fraction=e.new_alpha-e.alpha}this.animation.run()}},{key:"animate",value:function(t){this.$element.children.forEach(function(e){e.alpha=e.alpha_fraction*t+e.old_alpha})}},{key:"calcHidden",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.$dates.length*this.scale.x,n=(this.$dates.length-this.hidden.length)*this.item_width;if(t||this.prev_scale.x>this.scale.x){if((e-n)/this.visible.length<=1){var i=this.visible.slice();this.hidden_levels.push([]);for(var o=0;o<i.length;o++)o%2==0&&this.hidden_levels[this.hidden_levels.length-1].push(i[o])}(e-n)/this.visible.length<=1&&this.calcHidden(!0)}else{if(this.prev_scale.x<this.scale.x&&this.hidden_levels.length>0)(e-n)/this.hidden_levels[this.hidden_levels.length-1].length>this.item_width&&this.hidden_levels.splice(this.hidden_levels.length-1,1)}}},{key:"hidden",get:function(){var t=[];for(var e in this.hidden_levels)t=t.concat(this.hidden_levels[e]);return t}},{key:"visible",get:function(){for(var t=[],e=0;e<this.$dates.length;e++)this.hidden.includes(e)||t.push(e);return t}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=n(1);var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Component),i(e,[{key:"$onTheme",value:function(t){this.color=t.lines_color,this.animation.duration=t.lines_animation_duration,this.lines1.color=this.lines2.color=this.color}},{key:"$build",value:function(t,e){return this.height=this.$canvas.height-t.map_height-t.dates_height,this.margin=20,this.lines_count=6,this.color=t.lines_color,this.animation=new o.Animation({component:this,duration:t.lines_animation_duration,curve:o.Curves.easeOutCubic,handle:this.animate}),this.width=this.$canvas.width-2*this.margin,this.height=this.height-this.margin,this.step=this.height/this.lines_count,this.lines1=new r.LinesGroup({lineWidth:1,color:this.color}),this.lines2=new r.LinesGroup({lineWidth:1,color:this.color}),new r.Rectangle({x:this.margin,y:this.margin,w:this.width,h:this.height,child:new r.Position({children:[this.lines1,this.lines2]})})}},{key:"onMapUpdate",value:function(t){var e=t.offset,n=t.scale;this.offset=e,this.prev_scale=this.scale,this.scale=n,0==this.lines1.children.length?(this.lines1.children=this.createLines(),this.lines2.children=this.createLines()):this.updateLines()}},{key:"createLines",value:function(){for(var t=[],e=1;e<=this.lines_count;e++){var n=(e*this.step+this.offset.y)/this.scale.y,i=this.height-e*this.step,o=new r.Line({x2:this.width,y:i,y2:i});o.index=e,o.value=n,t.push(o)}return t}},{key:"updateLines",value:function(){var t=this.prev_scale.y-this.scale.y;if(0!=t){for(var e=300*t,n=0;n<this.lines1.children.length;n++){var i=this.lines1.children[n];i.y=i.y2=this.height-i.index*this.step,i.alpha=1,i.new_alpha=0,this.calcAnimation(i,e)}for(var o=0;o<this.lines2.children.length;o++){var r=this.lines2.children[o];r.y=r.y2=this.height-r.index*this.step-e,r.alpha=0,r.new_alpha=1,this.calcAnimation(r,e)}this.animation.run()}}},{key:"calcAnimation",value:function(t,e){t.old_y=t.y,t.new_y=t.y+e,t.offset_y=t.new_y-t.y,t.old_alpha=t.alpha,t.alpha_fraction=t.new_alpha-t.alpha}},{key:"animate",value:function(t){this.lines1.children.forEach(function(e){e.alpha=e.alpha_fraction*t+e.old_alpha,e.y=e.y2=e.offset_y*t+e.old_y}),this.lines2.children.forEach(function(e){e.alpha=e.alpha_fraction*t+e.old_alpha,e.y=e.y2=e.offset_y*t+e.old_y})}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=n(1);var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Component),i(e,[{key:"$onTheme",value:function(t){this.color=t.dates_text_color,this.font_size=t.text_size2,this.font_family=t.font_family,this.item_width=3.5*this.font_size,this.texts1.children=this.createTexts(),this.texts2.children=this.createTexts(),this.animation.duration=t.dates_animation_duration}},{key:"$onData",value:function(t){t.dates,t.columns,t.colors,t.names}},{key:"$onHideColumn",value:function(t){}},{key:"$onShowColumn",value:function(t){}},{key:"$build",value:function(t,e){return this.height=this.$canvas.height-t.map_height-t.dates_height,this.margin=20,this.lines_count=6,this.hidden_levels=[],this.color=t.dates_text_color,this.font_size=t.text_size2,this.font_family=t.font_family,this.item_width=3.5*this.font_size,this.animation=new o.Animation({component:this,duration:t.y_axis_animation_duration,curve:o.Curves.easeOutCubic,handle:this.animate}),this.width=this.$canvas.width-2*this.margin,this.height=this.height-this.margin,this.step=this.height/this.lines_count,this.texts1=new r.Position,this.texts2=new r.Position,this.el=new r.Position({children:[this.texts1,this.texts2]}),new r.Rectangle({x:this.margin,y:this.margin,w:this.width,h:this.height,child:this.el})}},{key:"onMapUpdate",value:function(t){var e=t.offset,n=t.scale;this.offset=e,this.prev_scale=this.scale,this.scale=n,0==this.texts1.children.length?(this.texts1.children=this.createTexts(),this.texts2.children=this.createTexts()):this.updateTexts()}},{key:"getValueByIndex",value:function(t){return(t=(t*this.step+this.offset.y)/this.scale.y)>1e6?(t/1e6).toFixed(1)+"М":t>1e3?(t/1e3).toFixed(1)+"К":t>>0}},{key:"createTexts",value:function(){for(var t=[],e=1;e<=this.lines_count;e++){var n=new r.Text({y:this.height-e*this.step-20,text:this.getValueByIndex(e),size:this.font_size,fontFamily:this.font_family,color:this.color});n.index=e,t.push(n)}return t}},{key:"updateTexts",value:function(){for(var t=300*(this.prev_scale.y-this.scale.y),e=0;e<this.texts2.children.length;e++){var n=this.texts2.children[e],i=this.getValueByIndex(n.index);if(n.text==i)return;n.text=i,n.y=this.height-n.index*this.step-t-20,n.alpha=0,n.new_alpha=1,this.calcAnimation(n,t)}for(var o=0;o<this.texts1.children.length;o++){var r=this.texts1.children[o];r.y=this.height-r.index*this.step-20,r.alpha=1,r.new_alpha=0,this.calcAnimation(r,t)}this.animation.run()}},{key:"calcAnimation",value:function(t,e){t.old_y=t.y,t.new_y=t.y+e,t.offset_y=t.new_y-t.y,t.old_alpha=t.alpha,t.alpha_fraction=t.new_alpha-t.alpha}},{key:"animate",value:function(t){this.texts1.children.forEach(function(e){e.alpha=e.alpha_fraction*t+e.old_alpha,e.y=e.offset_y*t+e.old_y}),this.texts2.children.forEach(function(e){e.alpha=e.alpha_fraction*t+e.old_alpha,e.y=e.offset_y*t+e.old_y})}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=n(1),a=n(2);var s=function(t){function e(t){var n=t.showCircles,i=t.showLine,o=t.showTotal;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.showCircles=n,r.showLine=i,r.showTotal=o||!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Component),i(e,[{key:"$onTheme",value:function(t){this.padding=t.main_padding,this.background=t.background,this.createCircles()}},{key:"$onData",value:function(t){t.dates,t.columns,t.colors,t.names}},{key:"$onHideColumn",value:function(t){}},{key:"$onShowColumn",value:function(t){}},{key:"$build",value:function(t,e){var n=this;this.prev_input={},this.r=5,this.padding=t.main_padding,this.background=t.background,this.height=this.$canvas.height-t.dates_height-t.map_height-this.padding,this.circles=new r.Position,this.line=new r.Rectangle({alpha:0,w:this.showLine?1:0,h:this.height,color:t.lines_color}),this.popup=new a.Popup({showTotal:this.showTotal});var i=new r.Rectangle({y:this.padding,h:this.height,child:new r.Position({x:this.$theme.main_margin,children:[this.line,this.circles,this.popup]})});return i.on("move",function(t,e){return n.onMove(t)}),i.on("leave",function(t,e){return n.hide()}),i}},{key:"onMapUpdate",value:function(t){var e=t.offset,n=t.scale;this.offset=e,this.prev_scale=this.scale,this.scale=n,this.$element.w=(this.$columns[0].length-2)*this.scale.x+2*this.$theme.main_margin,this.$element.x=e.x,0==this.circles.children.length?this.createCircles():this.updateCircles()}},{key:"createCircles",value:function(){for(var t=[],e=0;e<this.$columns.length;e++)for(var n=this.$columns[e],i=1;i<n.length&&!(i>n.length-1);i++){var o=new r.Circle({alpha:0,x:(i-1)*this.scale.x,y:this.height+this.offset.y-n[i]*this.scale.y,r:this.r,border:{w:this.r/2,color:this.$colors[n[0]]},color:this.showCircles?this.background:null});o.column_index=e,o.column_value=n[i],o.index=i-1,t.push(o)}this.circles.children=t}},{key:"updateCircles",value:function(){var t=this;if(this.prev_scale!=this.scale){var e=this.height+this.offset.y;this.circles.children.forEach(function(n){n.x=n.index*t.scale.x,n.y=e-n.column_value*t.scale.y})}}},{key:"show",value:function(){var t=null;for(var e in this.hover_points)t||(t=this.hover_points[e].index),this.hover_points[e].alpha=1;this.popup.show(t),this.emit("move",t)}},{key:"hide",value:function(){for(var t in this.emit("leave"),this.hover_points)this.hover_points[t].alpha=0;this.popup.hide(),this.line.alpha=0,this.$update()}},{key:"onMove",value:function(t){if(t.event.target===this.$canvas){if(t.x!=this.prev_input.x||t.y!=this.prev_input.y){this.prev_input.x=t.x,this.prev_input.y=t.y,this.line.x=-this.$element.x+t.x-this.$theme.main_margin,this.line.alpha=1;var e=[],n=[];for(var i in this.circles.children){var o=this.circles.children[i];if(!this.$hidden_columns.includes(o.column_index)){var r=o.globalX;r<t.x&&(!e[o.column_index]||e[o.column_index].globalX<r)?e[o.column_index]=o:r>t.x&&(!n[o.column_index]||n[o.column_index].globalX>r)&&(n[o.column_index]=o),o.alpha=0}}if(0!=e.length||0!=n.length){n[1]&&(!e[1]||t.x-e[1].globalX>=n[1].globalX-t.x)?this.hover_points=n:this.hover_points=e,this.show()}else this.hide()}}else this.hide()}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=n(1);var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),o(e,[{key:"$onTheme",value:function(t){}},{key:"$onData",value:function(t){t.dates,t.columns,t.colors,t.names}},{key:"$onHideColumn",value:function(t){this.animation_data=[!1,t]}},{key:"$onShowColumn",value:function(t){this.animation_data=[!0,t]}},{key:"$build",value:function(t,e){var n=this;return this.animation_data=[],this.animation=new r.Animation({component:this,duration:t.main_animation_duration,curve:r.Curves.easeOutCubic,handle:this.animate,onEnd:function(){n.animation_data=[]}}),this.columns=new a.Position,this.padding=t.main_padding,this.height=this.$canvas.height-t.dates_height-t.map_height-this.padding,new a.Rectangle({y:this.padding,h:this.height,child:this.columns})}},{key:"onMapUpdate",value:function(t){var e=t.offset,n=t.scale;this.offset=e,this.prev_scale=this.scale,this.scale=n,this.$element.w=(this.$columns[0].length-2)*this.scale.x,this.$element.x=e.x+this.$theme.main_margin,0==this.columns.children.length?this.createColumns():this.updateColumns()}},{key:"updateColumns",value:function(){}},{key:"animate",value:function(t,e){var n=i(e,2);n[0],n[1]}},{key:"createColumns",value:function(){}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),a=n(1);var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Columns),o(e,[{key:"createColumns",value:function(){for(var t=[],e=this.height+this.offset.y,n=0;n<this.$columns.length;n++){for(var i=this.$columns[n],o=new a.LinesGroup({lineWidth:2.5,color:this.$colors[i[0]],lineCap:"round"}),r=[],s=1;s<i.length&&i[s+1];s++){var l=i[s]*this.scale.y,u=i[s+1]*this.scale.y,h=new a.Line({x:(s-1)*this.scale.x,x2:s*this.scale.x,y:e-l,y2:e-u});h.column_index=n,h.column_value=i[s],h.column_next_value=i[s+1],h.index=s-1,r.push(h)}o.children=r,t.push(o)}this.columns.children=t}},{key:"updateColumns",value:function(){var t=this,e=this.height+this.offset.y,n=!0;this.columns.children.forEach(function(i){i.children.forEach(function(i){i.x=i.index*t.scale.x,i.x2=(i.index+1)*t.scale.x;var o=e-i.column_value*t.scale.y,r=e-i.column_next_value*t.scale.y;i.new_y!=o||i.new_y2!=r||0!=t.animation_data.length?(i.old_y=i.y,i.new_y=o,i.offset_y=i.new_y-i.y,i.old_y2=i.y2,i.new_y2=r,i.offset_y2=i.new_y2-i.y2):n=!1})}),n&&this.animation.run(this.animation_data)}},{key:"animate",value:function(t,e){var n=i(e,2),o=n[0],r=n[1];this.columns.children.forEach(function(e){e.children.forEach(function(e){e.column_index==r&&(e.alpha=0==o?1-t:t),e.y=e.offset_y*t+e.old_y,e.offset_y2&&(e.y2=e.offset_y2*t+e.old_y2)})})}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),a=n(2);var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Map),o(e,[{key:"startAnimate",value:function(t){var e=this,n=i(t,2);n[0],n[1];this.columns.children.forEach(function(t){for(var n=0;n<t.children.length;n++){var i=t.children[n],o=t.children[n+1];i.old_y=i.y,i.new_y=e.vertical_offset-i.column_value*e.scale.y,i.offset_y=i.new_y-i.y,o&&(i.old_y2=i.y2,i.new_y2=e.vertical_offset-o.column_value*e.scale.y,i.offset_y2=i.new_y2-i.y2)}})}},{key:"animate",value:function(t,e){var n=i(e,2),o=n[0],r=n[1];this.columns.children.forEach(function(e){for(var n=0;n<e.children.length;n++){var i=e.children[n];i.column_index==r&&(i.alpha=o?1-t:t),i.y=i.offset_y*t+i.old_y,i.offset_y2&&(i.y2=i.offset_y2*t+i.old_y2)}})}},{key:"createColumns",value:function(){for(var t=[],e=0;e<this.$columns.length;e++){for(var n=this.$columns[e],i=new r.LinesGroup({lineWidth:1.5,color:this.$colors[n[0]]}),o=[],a=1;a<n.length&&n[a+1];a++){var s=n[a]*this.scale.y,l=n[a+1]?n[a+1]*this.scale.y:s,u=new r.Line({x:(a-1)*this.scale.x,y:this.vertical_offset-s,x2:a*this.scale.x,y2:this.vertical_offset-l});u.column_index=e,u.column_value=n[a],o.push(u)}i.children=o,t.push(i)}return t}},{key:"calcMapYScale",value:function(){var t=[];for(var e in this.$visible_columns)this.$columns[this.$visible_columns[e]].forEach(function(e){return t.push(e)});if(t.length>0){var n=this.getMinMaxY(t);this.min_y=n.min,this.map_scale_y=(this.$theme.map_height-2*this.padding)/(n.max-n.min)}else this.map_scale_y=0}},{key:"calcMainYScale",value:function(){for(var t=[],e=0;e<this.$columns.length;e++)if(!this.$hidden_columns.includes(e))for(var n=1;n<this.$columns[e].length;n++){var i=(n-1)*this.scale.x;this.navigator.offset<i+5&&this.navigator.offset+this.navigator.scale>i-5&&t.push(this.$columns[e][n])}if(t.length>0){var o=this.getMinMaxY(t);this.main_scale_y=this.main_height/(o.max-o.min),this.main_offset_y=this.main_scale_y*o.min}else this.main_scale_y=0;this.emit("update",this.update_data)}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=n(2),a=l(n(38)),s=l(n(39));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Chart),i(e,[{key:"$onCreate",value:function(t,e){var n=this;this.columns=new a.default,this.hover=new r.Hover({showCircles:!1,showLine:!1,showTotal:!0}),this.hover.on("move",function(t){return n.columns.onMove(t)}),this.hover.on("leave",function(){return n.columns.onLeave()}),this.dates=new r.Dates,this.y_axis=new r.YAxis,this.lines=new r.Lines,this.map=new s.default,this.map.on("update",function(t){n.columns.onMapUpdate(t),n.hover.onMapUpdate(t),n.lines.onMapUpdate(t),n.dates.onMapUpdate(t),n.y_axis.onMapUpdate(t)}),this.checkboxes=new r.Checkboxes}},{key:"$onCreated",value:function(t,e){}},{key:"darkTheme",get:function(){return{name:"dark",background:"#242f3e",main_padding:20,main_margin:25,main_animation_duration:340,map_height:56,map_padding:2,map_margin:20,map_animation_duration:340,dates_height:46,dates_animation_duration:80,dates_text_color:"#99a4ac",map_color1:"#56626D",map_color2:"rgba(48, 66, 89, 0.6)",map_navigator_edge_width:14,map_navigator_min_width:2,font_family:"Arial",text_color1:"#99a4ac",text_size1:14,text_size2:14,lines_color:"rgba(255, 255, 255, 0.1)",lines_count:6,lines_animation_duration:340,y_axis_animation_duration:340}}},{key:"defaultTheme",get:function(){return{name:"default",background:"#fff",main_padding:20,main_margin:25,main_animation_duration:340,map_height:56,map_padding:2,map_margin:20,map_animation_duration:340,dates_height:46,dates_animation_duration:80,dates_text_color:"#99a4ac",map_color1:"#C0D1E1",map_color2:"rgba(226, 238, 249, 0.6)",map_navigator_edge_width:14,map_navigator_min_width:2,font_family:"Arial",text_color1:"#99a4ac",text_size1:14,text_size2:14,lines_color:"rgba(24, 45, 59, 0.1)",lines_count:6,lines_animation_duration:340,y_axis_animation_duration:340}}},{key:"defaultLocale",get:function(){return{month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}},{key:"ruLocale",get:function(){return{month:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],day:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]}}},{key:"components",get:function(){return[this.lines,this.columns,this.hover,this.y_axis,this.dates,this.map,this.checkboxes]}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),a=n(1);var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Columns),o(e,[{key:"createColumns",value:function(){for(var t=[],e=this.height+this.offset.y,n=0;n<this.$columns.length;n++){for(var i=this.$columns[n],o=new a.Position,r=[],s=1;s<i.length;s++){var l=(s-1)*this.scale.x,u=s*this.scale.x-l,h=e-i[s]*this.scale.y,c=this.height-h,f=this.getColumnHeight(n,s-1),d=new a.Rectangle({alpha:.5,color:this.$colors[i[0]],x:l-u/2,w:u,y:h-f,h:c});d.column_index=n,d.column_value=i[s],d.index=s-1,r.push(d)}o.children=r,t.push(o)}this.columns.children=t}},{key:"updateColumns",value:function(){var t=this,e=this.height+this.offset.y;this.columns.children.forEach(function(n){n.children.forEach(function(n){var i=n.index*t.scale.x,o=(n.index+1)*t.scale.x-i;n.x=i-o/2,n.w=o;var r=e-n.column_value*t.scale.y,a=t.height-r;if(t.animation_data[1]==n.column_index)n.new_alpha=t.animation_data[0]?.5:0,n.old_alpha=n.alpha,n.alpha_fraction=n.new_alpha-n.alpha,n.old_y=n.y,n.new_y=n.y,n.offset_y=n.new_y-n.old_y,n.old_h=n.h,n.new_h=n.h,n.offset_h=n.new_h-n.old_h;else{var s=t.getColumnHeight(n.column_index,n.index);n.old_y=n.y,n.new_y=r-s,n.offset_y=n.new_y-n.y,n.old_h=n.h,n.new_h=a,n.offset_h=n.new_h-n.h}})}),this.animation.run(this.animation_data)}},{key:"animate",value:function(t,e){var n=i(e,2),o=(n[0],n[1]);this.columns.children.forEach(function(e){e.children.forEach(function(e){e.column_index==o&&(e.alpha=e.alpha_fraction*t+e.old_alpha),e.y=e.offset_y*t+e.old_y,e.h=e.offset_h*t+e.old_h})})}},{key:"onMove",value:function(t){this.columns.children.forEach(function(e){e.children.forEach(function(e){0!==e.alpha&&(e.alpha=e.index==t?1:.5)})})}},{key:"onLeave",value:function(){this.columns.children.forEach(function(t){t.children.forEach(function(t){1==t.alpha&&(t.alpha=.5)})})}},{key:"getColumnHeight",value:function(t,e){for(var n=0,i=0;i<t;i++)this.$hidden_columns.includes(i)||(n+=this.$columns[i][e+1]);return n*this.scale.y}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),a=n(2);var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Map),o(e,[{key:"startAnimate",value:function(t){var e=this,n=i(t,2),o=n[0],r=n[1];this.columns.children.forEach(function(t){for(var n=0;n<t.children.length;n++){var i=t.children[n],a=e.vertical_offset-i.column_value*e.scale.y;if(1==o&&i.column_index==r)i.old_y=i.y,i.new_y=i.y,i.offset_y=i.new_y-i.old_y,i.old_h=i.h,i.new_h=i.h,i.offset_h=i.new_h-i.old_h;else{var s=e.getColumnHeight(i.column_index,i.index);i.old_y=i.y,i.new_y=a-s,i.offset_y=i.new_y-i.old_y,i.old_h=i.h,i.new_h=e.map_height-a,i.offset_h=i.new_h-i.old_h}}})}},{key:"animate",value:function(t,e){var n=i(e,2),o=n[0],r=n[1];this.columns.children.forEach(function(e){for(var n=0;n<e.children.length;n++){var i=e.children[n];i.column_index==r&&(i.alpha=o?1-t:t),i.y=i.offset_y*t+i.old_y,i.h=i.offset_h*t+i.old_h}})}},{key:"createColumns",value:function(){for(var t=[],e=0;e<this.$columns.length;e++){for(var n=this.$columns[e],i=new r.Position,o=[],a=1;a<n.length;a++){var s=(a-1)*this.scale.x,l=a*this.scale.x-s,u=this.vertical_offset-n[a]*this.scale.y,h=this.map_height-u,c=this.getColumnHeight(e,a-1),f=new r.Rectangle({color:this.$colors[n[0]],x:s-l/2,w:l,y:u-c,h:h});f.column_index=e,f.column_value=n[a],f.index=a-1,o.push(f)}i.children=o,t.push(i)}return t}},{key:"getColumnHeight",value:function(t,e){for(var n=0,i=0;i<t;i++)this.$hidden_columns.includes(i)||(n+=this.$columns[i][e+1]);return n*this.scale.y}},{key:"calcMapYScale",value:function(){var t=[];for(var e in this.$visible_columns)for(var n=this.$visible_columns[e],i=0;i<this.$columns[n].length;i++)null==t[i]&&(t[i]=0),t[i]+=this.$columns[n][i];if(this.min_y=0,t.length>0){var o=this.getMinMaxY(t);this.map_scale_y=(this.map_height-2*this.padding)/o.max}else this.map_scale_y=0}},{key:"calcMainYScale",value:function(){for(var t=[],e=0;e<this.$columns.length;e++)if(!this.$hidden_columns.includes(e))for(var n=1;n<this.$columns[e].length;n++){var i=(n-1)*this.scale.x;this.navigator.offset<i+10&&this.navigator.offset+this.navigator.scale>i-10&&(null==t[n]&&(t[n]=0),t[n]+=this.$columns[e][n])}if(this.main_offset_y=0,t.length>0){var o=this.getMinMaxY(t);this.main_scale_y=this.main_height/o.max}else this.main_scale_y=0;this.emit("update",this.update_data)}}]),e}();e.default=s}]);